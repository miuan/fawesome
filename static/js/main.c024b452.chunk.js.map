{"version":3,"sources":["app/utils.ts","pages/public/Login/PasswordComponent.tsx","app/hooks.ts","app/reducers/userSlice.ts","pages/public/Login/Register.tsx","pages/public/Login/utils.ts","pages/public/Login/Login.tsx","pages/public/Login/ForgottenPassword.tsx","pages/public/Login/ForgottenPasswordReset.tsx","pages/public/Login/VerifyUser.tsx","pages/public/Login/PassportCallback.tsx","pages/public/Home/Post.tsx","pages/public/Home/Home.tsx","components/Header/AdminHeader.tsx","components/Header/PublicHeader.tsx","components/Header/UserHeader.tsx","components/Header/Header.tsx","pages/user/UserDashboard/UserDashboard.tsx","components/ProtectedRoute/ProtectedRoute.tsx","components/List/FilterItem.tsx","components/List/RowItem.tsx","components/List/Row.tsx","components/Loading/Loading.tsx","components/DeleteModal/DeleteModal.tsx","components/Unauthorized/Unauthorized.tsx","components/List/Table.tsx","components/List/FilteredList.tsx","components/Editor/Editor.tsx","components/List/ConnectBase.tsx","pages/admin/Users/UsersList.tsx","pages/admin/UserRoles/UserRolesList.tsx","components/Editor/Control.tsx","pages/admin/UserRoles/UserRolesEdit.tsx","pages/user/Posts/Posts.tsx","App.tsx","app/store.ts","serviceWorker.ts","app/refreshToken.ts","app/apolloClient.ts","index.tsx"],"names":["getGraphqlMonsterClientAppRoot","process","substr","length","isEmailValid","email","RegExp","test","passwordStrong","password","valid","strong","name","variant","capital","lower","number","value","percentage","PasswordComponent","onPasswordChange","strongPassword","Form","Group","controlId","Label","Control","type","placeholder","onChange","isInvalid","Text","ProgressBar","now","label","useAppDispatch","useDispatch","useSelector","initialState","localStorage","getItem","user","token","id","roles","split","map","role","verified","Boolean","userFromStorage","state","userSlice","createSlice","reducers","changeState","action","payload","login","userToken","setItem","refreshToken","toString","r","logout","removeItem","selectUser","actions","REGISTER_MUTATION","Register","useState","setEmail","pass","setPass","copy","setCopy","history","useHistory","dispatch","useMutation","errorPolicy","registerMutation","loading","data","error","invalidEmail","setInvalidEmail","emailProbablyTaken","setEmailProbablyTaken","setStrong","invalidCopy","setInvalidCopy","onRegister","a","variables","register_v1","replace","console","log","data-bgimage","className","data-scroll-speed","method","Alert","to","event","target","c","Button","onClick","disabled","LOGIN_QL","Login","invalidPass","setInvalidPass","query","URLSearchParams","location","search","path","get","loginMutation","onLogin","login_v1","onBackClick","goBack","href","FORGOTTEN_PASSWORD_REQUEST_MUTATION","ForgottenPassword","emailSent","setEmailSent","doForgottenPassword","onRequestSend","FORGOTTEN_PASSWORD_CHECK_MUTATION","FORGOTTEN_PASSWORD_RESET_MUTATION","ForgotenPasswordReset","match","_","setPassword","doForgottenPasswordCheck","loadingForgottenPasswordCheck","dataForgottenPasswordCheck","doForgottenPasswordReset","useEffect","doCheck","onReset","reset","check","status","isPasswordValid","VERIFY_EMAIL_MUTATION","gql","VerifyUser","verifyToken","setVerified","verify","verifying","verifiedError","doVerifyUser","verifyEmail_v1","setTimeout","previouslyVerified","onVerifyUser","tokenFromFacebookCode","code","axios","PassportCallback","useLocation","codeRaw","setError","showError","errorMessage","response","JSON","parse","message","request","Post","post","text","Home","posts","setPosts","setText","newPosts","idx","UserHeader","onLogout","Dropdown","Toggle","Menu","Item","PublicHeader","Header","find","AdminHeader","UserDashboard","ProtectRoute","exact","children","basicOptionsName","contains","not_contains","starts_with","not_starts_with","ends_with","not_ends_with","isEmpty","FilterItem","fields","fieldSelected","setFieldSelected","optionSelected","setOptionSelected","filterText","setFilterText","filter","setFilter","doFilter","useCallback","f","processFilter","field","option","gc","o","o2","go","InputGroup","DropdownButton","as","Prepend","title","Object","getOwnPropertyNames","e","ListRowItem","item","fieldDesc","names","element","getElementFromField","component","push","reduce","p","ListRow","onDelete","showDelete","onEdit","getEditLink","doEdit","editLink","useMemo","toLowerCase","Fragment","tabIndex","onKeyPress","size","Loading","what","DeleteModal","show","onHide","categoryName","deleteObjectId","deleteObjectName","deleting","showMe","setShowMe","lastShow","setLastShow","onHideAction","Modal","closeButton","Title","Body","Footer","Unauthorized","where","Table","adminMode","queries","unauthorized","setUnauthorized","deleteObject","setDeleteObject","showDeleteDialog","setShowDeleteDialog","deletingOnDeleteDialog","setDeletingOnDeleteDialog","setLoading","setData","useQuery","ADMIN_LIST_QUERY","USER_LIST_QUERY","onError","onCompleted","d","dataFields","userRefetch","refetch","userLoading","DELETE_MUTATION","deleteProject","onHideDidaloDelete","deleteProjectMutation","obj","responsive","projectItem","createFilter","AND","addAnd","node","filterDestructNode","n","filterDestruct","fo","params","FilteredList","userId","staticFilter","onCreate","createDefaultFilter","defaultFilter","user_every","filterDestructed","onFilterChange","getDataFromRaw","rawData","keys","Editor","form","renameError","onUpdated","updateCache","undefined","localId","setLocalId","errors","setErrors","storedData","setStoredData","handleError","incommingError","incomingErrors","raw","skipLoading","QUERY","skip","loadedDataRaw","loadedData","updateDataFromLoaded","CREATE_MUTATION","update","createProjectMutation","UPDATE_MUTATION","updateProjectMutation","onSubmit","ConnectBase","elementTitle","setTitle","iraw","final","checked","indexOf","ADD","addMutation","REMOVE","removeMutation","updated","updateTitle","id1","id2","onChecked","Check","QUERY_ALL_USERS_ADMIN","USER_ROLE_QUERY","MUTATION_ADD_USER_ROLE_TO_USER","MUTATION_REMOVE_USER_ROLE_FROM_USER","MUTATION_REMOVE_USER","ConnectRole","UsersList","UserRoleList","required","register","formState","setValue","touchedFields","dirtyFields","FormControl","Feedback","UserRoleForm","reactForm","userRoleId","graphQlError","useForm","handleSubmit","getValues","watch","UserRoleEdit","useParams","Posts","postForRemoveId","setPostForRemoveId","App","ForgottenPasswordReset","ProtectedRoute","UserRolesList","store","configureStore","reducer","userReducer","window","hostname","retryLink","RetryLink","attempts","count","operation","delay","Math","random","isRefreshing","pendingRequests","unautheniticatedAction","forward","forward$","fromPromise","Promise","resolve","then","refreshToken_v1","callback","oldHeaders","getContext","headers","setContext","authorization","catch","finally","flatMap","authLink","httpLink","createHttpLink","uri","erroLink","graphQLErrors","networkError","locations","apolloClient","ApolloClient","link","ApolloLink","from","cache","InMemoryCache","defaultOptions","watchQuery","mutate","ReactDOM","render","StrictMode","ApolloProvider","client","basename","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c024b452.chunk.js","sourcesContent":["import axios from 'axios'\nimport { UserToken } from './reducers/userSlice'\n\nexport const getGraphqlMonsterClientAppRoot = () =>\n  process.env.REACT_APP_HOST?.substr(0, process.env.REACT_APP_HOST?.length - 8)\n\nexport const isEmailValid = (email: string) => {\n  if (process.env.NODE_ENV === 'development') return true\n\n  return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,15}/g).test(email)\n}\n\nexport const isPasswordValid = (password: string) => {\n  //if(process.env.NODE_ENV === 'development') return true\n\n  const regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/\n  return regularExpression.test(password)\n}\n\nexport interface IPasswordStrongResult {\n  valid: boolean\n  strong: number\n  name: string\n  variant: string\n}\nexport const passwordStrong = (password: string): IPasswordStrongResult => {\n  const length = password.length\n\n  if (length < 1) {\n    return {\n      valid: false,\n      strong: 0,\n      name: '',\n      variant: 'danger',\n    } as IPasswordStrongResult\n  }\n\n  if (length >= 15) {\n    return {\n      valid: true,\n      strong: 100,\n      name: 'strong',\n      variant: 'success',\n    } as IPasswordStrongResult\n  }\n\n  const capital = /(?=.*[A-Z]){2,}/.test(password) ? 2 : /(?=.*[A-Z])/.test(password) ? 1 : 0\n  const lower = /(?=.*[a-z]){2,}/.test(password) ? 2 : /(?=.*[a-z])/.test(password) ? 1 : 0\n  const number = /(?=.*[0-9]){2,}/.test(password) ? 2 : /(?=.*[0-9])/.test(password) ? 1 : 0\n  const special = /(?=.*[!@#$%^&*]){2,}/.test(password)\n    ? 2\n    : /(?=.*[!@#$%^&*])/.test(password)\n    ? 1\n    : 0\n\n  const value = capital + lower + number + special\n\n  const valid = (length > 7 && lower > 0 && number > 0) || process.env.NODE_ENV === 'development'\n  let percentage = value + length / 4\n  if (percentage > 10) percentage = 10\n\n  return {\n    valid,\n    strong: percentage * 10,\n    name: value > 6 ? 'strong' : value > 4 ? 'intermediate' : valid ? 'weak' : 'poor',\n    variant: percentage > 6 ? 'success' : valid ? 'warning' : 'danger',\n  } as IPasswordStrongResult\n}\n\nexport const uploadFile = async (event: React.FormEvent<HTMLInputElement>, user: UserToken) => {\n  const files = event.currentTarget?.files || []\n  const file = files[0]\n\n  const data = new FormData()\n  data.append('file', file)\n  return new Promise(async (resolve, reject) => {\n    const event = await axios.post(`${getGraphqlMonsterClientAppRoot()}/upload`, data, {\n      // authorization: Bearer\n      headers: {\n        Authorization: `Bearer ${user.token}`,\n      },\n    })\n    resolve(event)\n  })\n}\n","import React from 'react'\nimport { Form, ProgressBar } from 'react-bootstrap'\nimport { IPasswordStrongResult } from '../../../app/utils'\n\nexport interface IPasswordComponent {\n    strongPassword: IPasswordStrongResult,\n    password: string\n    onPasswordChange: (arg:any) => void\n}\n\nexport const PasswordComponent:React.FC<IPasswordComponent> = ({onPasswordChange, password, strongPassword}) => (\n    <Form.Group controlId=\"formBasicPassword\">\n        <Form.Label>Password</Form.Label>\n        <Form.Control\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={onPasswordChange}\n            value={password}\n            isInvalid={!strongPassword.valid}\n        />\n        <Form.Text>Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter</Form.Text>\n        <ProgressBar now={strongPassword.strong} label={strongPassword.name} variant={strongPassword.variant}/>\n    </Form.Group>\n)\n\nexport default PasswordComponent","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { RootState } from '../store'\n\nexport interface UserToken {\n  token: string\n  refreshToken: string\n  user: User\n}\n\nexport interface User {\n  id: string\n  email: string\n  verified: boolean\n  roles: UserRole[]\n  selectedOrgId?: string\n}\n\nexport interface UserRole {\n  name: string\n}\n\nexport interface UserState {\n  user?: UserWithToken\n  state: 'no-user' | 'processing' | 'user-login'\n}\n\nexport type UserWithToken = User & {\n  token: string\n}\n\nconst userToStorage = (userToken: UserToken) => {\n  localStorage.setItem('user.token', userToken.token)\n  localStorage.setItem('user.refreshToken', userToken.refreshToken)\n  localStorage.setItem('user.id', userToken.user.id)\n  localStorage.setItem('user.email', userToken.user.email)\n  localStorage.setItem('user.verified', Boolean(userToken.user.verified).toString())\n  localStorage.setItem('user.roles', userToken.user.roles.map((r) => r.name).toString())\n}\n\nconst removeUserFromStorage = () => {\n  localStorage.removeItem('user.refreshToken')\n  localStorage.removeItem('user.token')\n  localStorage.removeItem('user.id')\n  // localStorage.removeItem('user.email')\n  localStorage.removeItem('user.verified')\n  localStorage.removeItem('user.roles')\n}\n\nconst userFromStorage = () => {\n  const token = localStorage.getItem('user.token')\n  if (!token) {\n    return\n  }\n\n  return {\n    token,\n    email: localStorage.getItem('user.email'),\n    id: localStorage.getItem('user.id'),\n    roles: localStorage\n      .getItem('user.roles')\n      ?.split(',')\n      .map((role) => ({ name: role })),\n    verified: Boolean(localStorage.getItem('user.verified')),\n  } as UserWithToken\n}\n\nconst initialSelected = localStorage.getItem('organization.selected')\n\nconst initialState: UserState = {\n  user: userFromStorage(),\n  state: 'no-user',\n}\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    changeState: (state, action: PayloadAction<UserState['state']>) => {\n      state.state = action.payload\n    },\n    login(state, action: PayloadAction<UserToken>) {\n      userToStorage(action.payload)\n      state.user = {\n        id: action.payload.user.id,\n        token: action.payload.token,\n        email: action.payload.user.email,\n        roles: action.payload.user.roles,\n        verified: Boolean(action.payload.user.verified),\n      } as UserWithToken\n    },\n    logout(state) {\n      removeUserFromStorage()\n      delete state.user\n    },\n  },\n})\n\nexport const selectUser = (state: RootState) => state.user.user\n// Action creators are generated for each case reducer function\nexport const { login, logout, changeState } = userSlice.actions\n\nexport default userSlice.reducer\n","import React, { useState } from \"react\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/client\";\nimport { Modal, Form, Alert, Button, ProgressBar } from \"react-bootstrap\";\nimport { Link, useHistory } from 'react-router-dom';\nimport { isEmailValid, passwordStrong } from \"../../../app/utils\";\nimport PasswordComponent from \"./PasswordComponent\";\nimport { loader } from 'graphql.macro';\nimport { useAppDispatch } from \"../../../app/hooks\";\nimport { login, UserToken, changeState } from \"../../../app/reducers/userSlice\";\n\nexport const REGISTER_MUTATION = loader('./graphql/register.gql')\n\nexport const Register: React.FC = () => {\n  const defaultPath = process.env.REACT_APP_DEFAULT_USER_PATH || '/user/dashboard'\n\n  const [email, setEmail] = useState(\"\");\n  const [pass, setPass] = useState(\"\");\n  const [copy, setCopy] = useState(\"\");\n\n  const history = useHistory()\n  const dispatch = useAppDispatch();\n\n  const [registerMutation, { loading, data, error }] = useMutation(REGISTER_MUTATION, {\n    errorPolicy: \"none\",\n  });\n\n  const [invalidEmail, setInvalidEmail] = useState(false);\n  const [emailProbablyTaken, setEmailProbablyTaken] = useState(false);\n  const [strong, setStrong] = useState(passwordStrong(''))\n\n  const [invalidCopy, setInvalidCopy] = useState(false);\n\n  const onRegister = async () => {\n    if (!isEmailValid(email)) {\n      return setInvalidEmail(true)\n    }\n\n    if (pass !== copy) {\n      setInvalidCopy(true)\n      return\n    }\n\n    try {\n      dispatch(changeState('processing'))\n      const { data } = await registerMutation({ variables: { email, pass } })\n      const userToken = data.register_v1 as UserToken\n\n      dispatch(login(userToken))\n\n      history.replace(defaultPath)\n    } catch (ex) {\n      console.log('onError', data)\n      setEmailProbablyTaken(true)\n    }\n\n  };\n\n  const onEmailChange = (event: any) => {\n    setEmail(event.target.value);\n    setInvalidEmail(false);\n    setEmailProbablyTaken(false)\n  };\n\n  const onPasswordChange = (event: any) => {\n    const pass = event.target.value as string\n\n    setPass(pass);\n    setInvalidEmail(false);\n    setStrong(passwordStrong(pass))\n  };\n\n  const onCopyChange = (event: any) => {\n    const c = event.target.value\n    setCopy(c)\n    setInvalidEmail(false)\n\n    if (c == pass) {\n      setInvalidCopy(false)\n    }\n  };\n\n  return (<>\n    <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\n      <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 offset-md-2\">\n              <form action='blank.php' className=\"row\" id='form_subscribe' method=\"post\" name=\"myForm\">\n                <div className=\"col-md-12 text-center\">\n                  <h1>User Registration</h1>\n                  <p>All big things starting here</p>\n                </div>\n                <div className=\"clearfix\"></div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3\">\n            <form name=\"contactForm\" id='contact_form' className=\"form-border\" method=\"post\" action='blank.php'>\n\n\n              <Form>\n                {invalidEmail && (<Alert variant={\"danger\"}>Email is not in good shape...</Alert>)}\n                {emailProbablyTaken && (<Alert variant={\"danger\"}>Email is probably taken, did you <Link to=\"/forgotten-password\">forgotten password</Link>?</Alert>)}\n                {invalidCopy && (<Alert variant={\"danger\"}>The retyped password is not the same</Alert>)}\n                <Form.Group controlId=\"formBasicEmail\">\n                  <Form.Label>Email address</Form.Label>\n                  <Form.Control\n                    type=\"email\"\n                    placeholder=\"Enter email\"\n                    onChange={onEmailChange}\n                    value={email}\n                    isInvalid={invalidEmail}\n                  />\n                  <Form.Text className=\"text-muted\">\n                    We'll never share your email with anyone else.\n                  </Form.Text>\n                </Form.Group>\n\n                <PasswordComponent password={pass} onPasswordChange={onPasswordChange} strongPassword={strong} />\n\n                <Form.Group controlId=\"formBasicPassword\">\n                  <Form.Label>Re-Password</Form.Label>\n                  <Form.Control\n                    type=\"password\"\n                    placeholder=\"Retype Password\"\n                    onChange={onCopyChange}\n                    value={copy}\n                    isInvalid={invalidCopy}\n                  />\n                </Form.Group>\n              </Form>\n\n              <div id='submit' className=\"pull-left\">\n                {!loading && <Button className=\"btn-round\" variant=\"primary\" onClick={() => onRegister()}>Register</Button>}\n                {loading && <Button className=\"btn-round\" variant=\"primary\" disabled>Loading...</Button>}\n\n                <div className=\"clearfix\"></div>\n\n                <div className=\"spacer-single\"></div>\n\n                {/* <ul className=\"list s3\">\n                  <li>Or login with:</li>\n                  <li><a href=\"#\">Facebook</a></li>\n                  <li><a href=\"#\">Google</a></li>\n                  <li><a href=\"#\">Instagram</a></li>\n                </ul> */}\n\n              </div>\n\n            </form>\n          </div>\n        </div>\n      </div>\n    </section>\n  </>\n  );\n};\n\nexport default Register;\n","\n\nexport const isEmailValid = (email: string) => {\n    if(process.env.NODE_ENV === 'development') return true\n\n    return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,15}/g).test(email)\n}\n\nexport const isPasswordValid = (password: string) => {\n    //if(process.env.NODE_ENV === 'development') return true\n\n    const regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/\n    return regularExpression.test(password)\n}\n\nexport interface IPasswordStrongResult {\n    valid: boolean\n    strong: number\n    name: string\n    variant: string\n}\nexport const passwordStrong = (password: string):IPasswordStrongResult => {\n    const length = password.length\n\n    if(length < 1){\n        return {\n           valid: false,\n           strong: 0,\n           name: '',\n           variant: 'danger'  \n        } as IPasswordStrongResult\n    }\n\n    if(length >= 15){\n        return {\n            valid: true,\n            strong: 100,\n            name: 'strong',\n            variant: 'success' \n         } as IPasswordStrongResult\n    }\n\n    const capital = /(?=.*[A-Z]){2,}/.test(password) ? 2 : ( /(?=.*[A-Z])/.test(password) ? 1 : 0)\n    const lower = /(?=.*[a-z]){2,}/.test(password) ? 2 : ( /(?=.*[a-z])/.test(password) ? 1 : 0)\n    const number = /(?=.*[0-9]){2,}/.test(password) ? 2 : ( /(?=.*[0-9])/.test(password) ? 1 : 0)\n    const special = /(?=.*[!@#$%^&*]){2,}/.test(password) ? 2 : ( /(?=.*[!@#$%^&*])/.test(password) ? 1 : 0)\n    \n    const value = capital + lower + number + special\n\n    const valid = (length > 7 && lower > 0 && number > 0) || process.env.NODE_ENV === 'development'\n    let percentage = (value+(length/4))\n    if(percentage > 10) percentage = 10\n\n    return {\n        valid,\n        strong: percentage * 10,\n        name: value > 6 ? 'strong' : (value > 4 ? 'intermediate' : (valid ? 'weak' : 'poor')),\n        variant: percentage > 6 ? 'success' : (valid ? 'warning' : 'danger'),\n    } as IPasswordStrongResult\n    \n}","import { useMutation } from '@apollo/client';\nimport { loader } from 'graphql.macro';\nimport React, { useState } from 'react';\nimport { Alert, Button, Form } from 'react-bootstrap';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAppDispatch } from '../../../app/hooks';\nimport { changeState, login, UserToken } from '../../../app/reducers/userSlice';\nimport { getGraphqlMonsterClientAppRoot } from '../../../app/utils';\nimport { isEmailValid } from './utils';\n\nexport const LOGIN_QL = loader('./graphql/login.gql')\n\nexport const Login: React.FC = () => {\n    const [email, setEmail] = useState(localStorage.getItem('user.email') || '')\n    const [pass, setPass] = useState('')\n\n    const [invalidEmail, setInvalidEmail] = useState(false)\n    const [invalidPass, setInvalidPass] = useState(false)\n\n    const history = useHistory()\n    const query = new URLSearchParams(history.location.search)\n    const path = query.get('path')\n    const role = query.get('role')\n    const defaultPath = process.env.REACT_APP_DEFAULT_USER_PATH || '/user/dashboard'\n\n    const dispatch = useAppDispatch();\n    const [loginMutation, { loading, data, error }] = useMutation(LOGIN_QL, { errorPolicy: 'none' });\n\n    const onLogin = async () => {\n        if (!isEmailValid(email)) {\n            return setInvalidEmail(true)\n        }\n\n        try {\n            dispatch(changeState('processing'))\n            const { data }: any = await loginMutation({ variables: { email, pass } })\n            const userToken = data.login_v1 as UserToken\n\n            dispatch(login(userToken))\n            // go to path in case user want to reach some page before login\n            // or go to default path\n            history.replace(path || defaultPath)\n        } catch (e) {\n            setInvalidEmail(true)\n            setInvalidPass(true)\n            setPass('')\n        }\n    }\n\n    const onEmailChange = (event: any) => {\n        setEmail(event.target.value)\n        setInvalidEmail(false)\n        setInvalidPass(false)\n    }\n\n    const onPasswordChange = (event: any) => {\n        setPass(event.target.value)\n        setInvalidEmail(false)\n        setInvalidPass(false)\n    }\n\n    const onBackClick = () => {\n        history.goBack()\n    }\n\n    return (<>\n        <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\n            <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-md-8 offset-md-2\">\n                            <form action='blank.php' className=\"row\" id='form_subscribe' method=\"post\" name=\"myForm\">\n                                <div className=\"col-md-12 text-center\">\n                                    <h1>User Login</h1>\n                                    <p>We was missed you already</p>\n                                    {role && <Alert variant={'warning'}>You trying to reach part what is under registered user with <b>{role}</b> role protection. <Link to={'/'} onClick={onBackClick}>Please take me back</Link></Alert>}\n                                    {(!role && path) && <Alert variant={'warning'}>You trying to reach part what is under registered user protection. <Link to={'/'} onClick={onBackClick}>Please take me back</Link></Alert>}\n                                </div>\n                                <div className=\"clearfix\"></div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-md-6 offset-md-3\">\n                        <Form name=\"contactForm\" id='contact_form' className=\"form-border\" >\n                            {!invalidPass && <h3>Login to your account</h3>}\n                            {invalidPass && <Alert variant={'danger'}>Email or password is not valid. Did You <Link to=\"/forgotten-password\">forgotten your password</Link>?</Alert>}\n                            {invalidEmail && (<Alert variant={\"danger\"}>Email is not in good shape...</Alert>)}\n                            <Form.Group controlId=\"formBasicEmail\">\n                                <Form.Label>Email address</Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Enter email\" onChange={onEmailChange} value={email} isInvalid={invalidEmail} />\n                            </Form.Group>\n\n\n                            <Form.Group controlId=\"formBasicPassword\">\n                                <Form.Label>Password</Form.Label>\n                                <Form.Control type='password' onChange={onPasswordChange} value={pass} isInvalid={invalidPass} />\n                                <Form.Text className=\"text-muted\">\n                                    We'll never share your password with anyone else.\n                                </Form.Text>\n                            </Form.Group>\n\n                            <div id='submit' className=\"pull-left\">\n                                {!loading && <Button className=\"btn-round\" variant=\"primary\" onClick={() => onLogin()}>Login</Button>}\n                                {loading && <Button className=\"btn-round\" variant=\"primary\" disabled>Loading...</Button>}\n                                <div className=\"clearfix\"></div>\n\n                                <div className=\"spacer-single\"></div>\n\n                                <ul className=\"list s3\">\n                                    <li>Or login with:</li>\n                                    <li><a href={`${getGraphqlMonsterClientAppRoot()}/auth/github`}>GitHub</a></li>\n                                    <li><a href={`${getGraphqlMonsterClientAppRoot()}/auth/facebook`}>Facebook</a></li>\n                                    <li><a href={`${getGraphqlMonsterClientAppRoot()}/auth/google`}>Google</a></li>\n                                </ul>\n\n                            </div>\n\n                        </Form>\n                    </div>\n                </div>\n            </div>\n        </section>\n    </>)\n}\n\nexport default Login","import React, { useState } from \"react\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/client\";\nimport { Modal, Form, Alert, Button } from \"react-bootstrap\";\nimport { Link, useHistory } from 'react-router-dom';\nimport { isEmailValid } from \"../../../app/utils\";\nimport { loader } from \"graphql.macro\";\n\nconst FORGOTTEN_PASSWORD_REQUEST_MUTATION = loader('./graphql/forgotten-password-request.gql');\n\nexport const ForgottenPassword: React.FC = () => {\n  const [email, setEmail] = useState('');\n  const [invalidEmail, setInvalidEmail] = useState(false);\n  const [emailSent, setEmailSent] = useState(false)\n\n  const history = useHistory()\n\n  const [checkResetEmail, { loading: loadingCheckResetEmail, data: checkResetEmailData, error: checkResetEmailError }] = useMutation(FORGOTTEN_PASSWORD_REQUEST_MUTATION, {\n    errorPolicy: \"none\",\n  });\n\n  const [doForgottenPassword, { loading, data, error }] = useMutation(FORGOTTEN_PASSWORD_REQUEST_MUTATION, {\n    errorPolicy: \"none\",\n  });\n\n  const onRequestSend = async () => {\n    setEmailSent(false)\n    if(email && isEmailValid(email)){\n      setInvalidEmail(false)\n      try {\n        const { data } = await doForgottenPassword({ variables: { email } })\n        setEmailSent(true)\n      } catch (ex) {\n        console.log('onError', data)\n        setInvalidEmail(true)\n      }\n    } else {\n      setInvalidEmail(true)\n    }\n  };\n\n  const onEmailChange = (event: any) => {\n    setEmail(event.target.value);\n    setInvalidEmail(false);\n  };\n\n  if(emailSent) {\n    return (\n      <>\n      <Alert variant={\"success\"}>We sent to You instruction to email {email}. Check your mailbox (don't forget check spam as well)</Alert>\n      </>\n    )\n  }\n\n  return (<>\n    <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\n      <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 offset-md-2\">\n              <form action='blank.php' className=\"row\" id='form_subscribe' method=\"post\" name=\"myForm\">\n                <div className=\"col-md-12 text-center\">\n                  <h1>Forgotten Password</h1>\n                  <p>Shortly You will be back</p>\n                </div>\n                <div className=\"clearfix\"></div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3\">\n            <form name=\"contactForm\" id='contact_form' className=\"form-border\" method=\"post\" action='blank.php'>\n\n\n              <Form>\n              <Form.Group controlId=\"formBasicEmail\">\n                  <Form.Label>Email address</Form.Label>\n                  <Form.Control\n                    type=\"email\"\n                    placeholder=\"Enter email\"\n                    onChange={onEmailChange}\n                    value={email}\n                    isInvalid={invalidEmail}\n                  />\n                  <Form.Text className=\"text-muted\">\n                    We'll never share your email with anyone else.\n                  </Form.Text>\n                </Form.Group>\n\n                \n              </Form>\n\n              <div id='submit' className=\"pull-left\">\n                {!loading && <Button className=\"btn-round\" variant=\"primary\" onClick={() => onRequestSend()}>Send Recovery Link</Button>}\n                {loading && <Button className=\"btn-round\" variant=\"primary\" disabled>Loading...</Button>}\n\n                <div className=\"clearfix\"></div>\n              </div>\n\n            </form>\n          </div>\n        </div>\n      </div>\n    </section>\n  </>\n  );\n};\n\nexport default ForgottenPassword;\n","import React, { useEffect, useState } from \"react\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/client\";\nimport { Modal, Form, Alert, Button, ProgressBar } from \"react-bootstrap\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { isEmailValid, isPasswordValid, passwordStrong } from \"../../../app/utils\";\nimport _ from \"lodash\";\nimport PasswordComponent from \"./PasswordComponent\";\nimport { useDispatch } from \"react-redux\";\nimport { login, changeState } from \"../../../app/reducers/userSlice\";\nimport { loader } from \"graphql.macro\";\n\nexport const FORGOTTEN_PASSWORD_CHECK_MUTATION = loader('./graphql/forgotten-password-check.gql')\nexport const FORGOTTEN_PASSWORD_RESET_MUTATION = loader('./graphql/forgotten-password-reset.gql')\n\n\nexport const ForgotenPasswordReset: React.FC<any> = ({match}) => {\n  const token = _.get(match, 'params.token')\n  const [password, setPassword] = useState(\"\");\n  const [copy, setCopy] = useState(\"\");\n\n  const history = useHistory()\n  const dispatch = useDispatch()\n\n  const [doForgottenPasswordCheck, { loading: loadingForgottenPasswordCheck, data: dataForgottenPasswordCheck, error: errorForgottenPasswordCheck }] = useMutation(FORGOTTEN_PASSWORD_CHECK_MUTATION, {\n    errorPolicy: \"none\",\n  });\n\n  const [doForgottenPasswordReset, { loading, data, error }] = useMutation(FORGOTTEN_PASSWORD_RESET_MUTATION, {\n    errorPolicy: \"none\",\n  });\n\n  \n  const [invalidPass, setInvalidPass] = useState(false);\n  const [strong, setStrong] = useState(passwordStrong(''))\n  const [validPass, setValidPass] = useState(false);\n\n  const [invalidCopy, setInvalidCopy] = useState(false);\n\n  useEffect(()=>{\n    const doCheck = async () => {\n      try{\n        await doForgottenPasswordCheck({ variables: {token}})\n      } catch(ex) {\n\n      } finally {\n      }\n      \n    }\n\n    doCheck()\n\n  }, [token, doForgottenPasswordCheck])\n\n  const onReset = async () => {\n    if(!strong.valid){\n      return\n    }\n\n    if (password !== copy) {\n      setInvalidCopy(true)\n      return\n    }\n\n    try {\n      dispatch(changeState('processing'))\n      const { data } = await doForgottenPasswordReset({ variables: { token, password } })\n      dispatch(login(data.reset))\n      history.replace('/user/projects')\n    } catch (ex) {\n        console.log('onError', data)\n        \n      }\n  \n  };\n\n  const onPasswordChange = (event: any) => {\n    const pass = event.target.value as string\n\n    setPassword(pass);\n    const valid = isPasswordValid(pass)\n    setInvalidPass(!valid);\n    setStrong(passwordStrong(pass))\n  };\n\n  const onCopyChange = (event: any) => {\n    const c = event.target.value\n    setCopy(c)\n    setInvalidPass(false)\n\n    if (c == password) {\n      setInvalidCopy(false)\n    }\n  };\n\n  if(loadingForgottenPasswordCheck){\n    return (<Alert variant={\"success\"}>Checking token</Alert>)\n  } else if ( dataForgottenPasswordCheck && dataForgottenPasswordCheck.check && dataForgottenPasswordCheck.check.status === 'valid') {\n    return (<>\n      <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\n        <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-md-8 offset-md-2\">\n                <form action='blank.php' className=\"row\" id='form_subscribe' method=\"post\" name=\"myForm\">\n                  <div className=\"col-md-12 text-center\">\n                    <h1>User Password Reset</h1>\n                    <p>You will be back soon</p>\n                  </div>\n                  <div className=\"clearfix\"></div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n  \n      <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6 offset-md-3\">\n              <form name=\"contactForm\" id='contact_form' className=\"form-border\" method=\"post\" action='blank.php'>\n  \n  \n                <Form>\n                {/* {invalidPass && (<Alert variant={\"danger\"}>The password have to contain capital letter,lower letter, a number and must be 6-16 characters long</Alert>)}   */}\n                {invalidCopy && (<Alert variant={\"danger\"}>The retyped password is not the same</Alert>)}\n                <PasswordComponent password={password} onPasswordChange={onPasswordChange} strongPassword={strong} />\n  \n                  <Form.Group controlId=\"formBasicPassword\">\n                    <Form.Label>Re-Password</Form.Label>\n                    <Form.Control\n                      type=\"password\"\n                      placeholder=\"Retype Password\"\n                      onChange={onCopyChange}\n                      value={copy}\n                      isInvalid={invalidCopy}\n                    />\n                  </Form.Group>\n                </Form>\n  \n                <div id='submit' className=\"pull-left\">\n                  {!loading && <Button className=\"btn-round\" variant=\"primary\" onClick={() => onReset()} disabled={!strong.valid}>Reset password</Button>}\n                  {loading && <Button className=\"btn-round\" variant=\"primary\" disabled>Loading...</Button>}\n  \n                  <div className=\"clearfix\"></div>\n  \n  \n                </div>\n  \n              </form>\n            </div>\n          </div>\n        </div>\n      </section>\n    </>\n    );\n  } else {\n    return (<Alert variant={\"danger\"}>The <b>{token}</b> is not valid or already used</Alert>)\n  }\n\n  \n};\n\nexport default ForgotenPasswordReset;\n","import React, { useEffect, useState } from \"react\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/client\";\nimport { Modal, Form, Alert, Button } from \"react-bootstrap\";\nimport { Link, useHistory } from 'react-router-dom';\nimport * as _ from 'lodash'\nimport { login } from \"../../../app/reducers/userSlice\";\nimport { useDispatch } from \"react-redux\";\n\nconst VERIFY_EMAIL_MUTATION = gql`\n  mutation verifyEmail($verifyToken: String!) {\n    verifyEmail_v1(verifyToken: $verifyToken) {\n      refreshToken\n      token\n      user {\n        roles{name}\n        id,\n        email,\n        verified\n      }\n    }\n  }\n`;\n\nexport const VerifyUser: React.FC<any> = ({match}) => {\n  const verifyToken = _.get(match, 'params.verifyToken')\n  const [verified, setVerified] = useState(false);\n\n  const history = useHistory()\n  const dispatch = useDispatch()\n\n  const [verify, { loading: verifying, data, error: verifiedError }] = useMutation(VERIFY_EMAIL_MUTATION, {\n    errorPolicy: \"none\",\n  });\n\n  const doVerifyUser = async () => {\n    try {\n      const { data } = await verify({ variables: { verifyToken } })\n      dispatch(login(data.verifyEmail_v1))\n      setVerified(true)\n      localStorage.setItem('user.verifyToken', verifyToken)\n      setTimeout(()=>{\n        history.replace('/user/projects')\n      }, 2000)\n    } catch (ex) {\n      console.log('onError', data)\n    }\n  \n  };\n\n  const onVerifyUser = () => {\n    const previouslyVerified = localStorage.getItem('user.verifyToken')\n    const userVerified = localStorage.getItem('user.verified') == 'true'\n\n    // user probably comming with the same link\n    // what was for his first verified\n    if(userVerified && previouslyVerified == verifyToken) {\n      history.replace('/user/projects')\n    } else {\n      doVerifyUser()\n    }\n    \n  }\n\n  useEffect(()=>{\n   if(verifyToken){\n    onVerifyUser()\n   }\n  }, [verifyToken])\n  \n\n  return (<section>\n    <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\n    <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 offset-md-2\">\n              {verified ? (<div className=\"alert alert-success\" role=\"alert\">Your account was verified <Button>Start creating</Button></div>): null} \n              {verifying ? (<div className=\"alert alert-dark\" role=\"alert\">Your accont is verifing...</div>): null}\n              {!verifyToken || verifiedError ? ( <div className=\"alert alert-dark\" role=\"alert\">The code is invalid or already applyed</div>): null}\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>)\n};\n\nexport default VerifyUser;\n","import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Link, useHistory, useLocation } from 'react-router-dom'\nimport _ from 'lodash'\nimport { Alert } from 'react-bootstrap'\nimport { getGraphqlMonsterClientAppRoot } from '../../../app/utils'\nimport { useAppDispatch } from '../../../app/hooks'\nimport { login, UserToken } from '../../../app/reducers/userSlice'\n\nexport const tokenFromFacebookCode = async (type:string, code: string) => {\n    return axios.get(`${getGraphqlMonsterClientAppRoot()}/auth/${type}/callback?code=${code}`)\n}\n\nexport const PassportCallback: React.FC<{type: string}> = ({type}) => {\n    const location = useLocation()\n    const codeRaw = _.get(location, 'search', '').split('?code=')\n    const code = codeRaw.length > 1 ? codeRaw[1] : ''\n\n\n    const history = useHistory()\n    const dispatch = useAppDispatch();\n\n    const [error, setError] = useState<string>()\n\n    const showError = (errorMessage:string) => {\n        setError(errorMessage)\n        setTimeout(()=>{\n            history.replace('/login')\n        }, 4000)\n    }\n    useEffect(()=>{\n        const request = async () => {\n            try {\n                const data = await tokenFromFacebookCode(type, code)\n                dispatch(login(data as any))\n                history.replace('/user/projects')\n            } catch(ex) {\n                const response = JSON.parse(_.get(ex, 'request.response', '{}'))\n                showError(response.error?.message || ex.message)\n            }\n            \n           \n        }\n\n        if(code) request()\n        else showError('User denied')\n    }, [location])\n\n    return (<>\n        {error && <Alert variant={'danger'}>{type} login isn't work due \"{error}\" You will be redirect back to <Link to=\"/login\">Login</Link></Alert>}\n    </>)\n}\n","import * as React from \"react\";\n\nexport type TPostModel = {\n  id: number;\n  text: string;\n};\n\nexport type TPostParams = {\n  post: TPostModel;\n};\n\nexport const Post = ({ post }: TPostParams) => {\n  return (\n    <div>\n      {post.id} {post.text}\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport logo from \"../../../logo.svg\";\n// import { Counter } from './features/counter/Counter';\nimport \"./Home.css\";\nimport { Post, TPostModel } from \"./Post\";\n\nfunction Home() {\n  // const posts: Post[] = [{ text: \"Initial post \" }];\n  const [posts, setPosts] = useState<TPostModel[]>([]);\n  const [text, setText] = useState<string>(\"\");\n  //let text = \"\";\n\n  const addPost = () => {\n    // const newPosts = [];\n    // for (const p of posts) {\n    //   newPosts.push(p);\n    // }\n    // newPosts.push({ id: posts.length + 1, text: \"Post \" });\n    const newPosts = [...posts, { id: posts.length + 1, text: text }];\n\n    setText(\"\");\n    setPosts(newPosts);\n  };\n\n  const onTextChange = (event: any) => {\n    setText(event.target.value);\n    //text = event.target.value;\n  };\n\n  return (\n    <div className=\"App\">\n      <h4>Add Post</h4>\n      <input type=\"text\" value={text} onChange={onTextChange} />\n      <Button onClick={addPost}>Add Post</Button>\n\n      <h4>Post</h4>\n      {posts.map((post, idx) => (\n        <div key={idx}>\n          <Post post={post} />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Home;\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Dropdown from 'react-bootstrap/Dropdown'\nimport Nav from 'react-bootstrap/Nav'\nimport Badge from 'react-bootstrap/Badge'\n\nconst UserHeader = ({user, onLogout}:any) =>  ( <div className=\"header-light transparent scroll-light container\">\n<div className=\"row\">\n  <div className=\"col-md-2\">\n  <Dropdown>\n    <Dropdown.Toggle variant=\"normal\" id=\"dropdown-basic\">\n      Menu\n    </Dropdown.Toggle>\n\n    <Dropdown.Menu>\n      <Dropdown.Item href=\"/\">Home</Dropdown.Item>\n    </Dropdown.Menu>\n\n  </Dropdown>\n\n  <Dropdown>\n    <Dropdown.Toggle variant=\"normal\" id=\"dropdown-basic\">\n      Admin\n    </Dropdown.Toggle>\n\n    <Dropdown.Menu>\n      <Dropdown.Item href=\"/admin/users\">Users</Dropdown.Item>\n      <Dropdown.Item href=\"/admin/roles\">Roles</Dropdown.Item>\n    </Dropdown.Menu>\n    \n  </Dropdown>\n  </div>\n  <div className=\"header-text col-md-8\">\n    <div>\n      This Header only for loged user with admin role\n    </div>\n  </div>\n  <div className=\"col-md-2\">\n  <Dropdown>\n    <Dropdown.Toggle variant=\"normal\" id=\"dropdown-basic\">\n      User\n    </Dropdown.Toggle>\n\n\n\n    <Dropdown.Menu>\n      <Dropdown.Item href=\"/\"><Link to=\"/user/dashboard\" >User Dashboard</Link></Dropdown.Item>\n      <Dropdown.Item href=\"/\"><Link className=\"\" to=\"/\" onClick={onLogout}>Logout</Link></Dropdown.Item>\n    </Dropdown.Menu>\n  </Dropdown>\n  </div>\n</div>\n</div>)\n\nexport default UserHeader","import React from 'react'\nimport { Button, Dropdown } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nimport './Header.css'\n\nexport const PublicHeader = () => ( <div className=\"header-light transparent scroll-light container\">\n    <div className=\"row\">\n      <div className=\"col-md-2\">\n      <Dropdown>\n        <Dropdown.Toggle variant=\"normal\" id=\"dropdown-basic\">\n          Menu\n        </Dropdown.Toggle>\n\n        <Dropdown.Menu>\n          <Dropdown.Item href=\"/\">Home</Dropdown.Item>\n        </Dropdown.Menu>\n      </Dropdown>\n      </div>\n      <div className=\"header-text col-md-8\">\n        <div>\n         This is public Header\n        </div>\n      </div>\n      <div className=\"col-md-2\">\n        <Link className=\"\" to=\"/login\">Login</Link> or <Link className=\"\" to=\"/register\">Register</Link>\n      </div>\n    </div>\n  </div>)\n\n\n\nexport default PublicHeader","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Dropdown from 'react-bootstrap/Dropdown'\nimport Nav from 'react-bootstrap/Nav'\nimport Badge from 'react-bootstrap/Badge'\n\nconst UserHeader = ({user, onLogout}:any) =>  ( <div className=\"header-light transparent scroll-light container\">\n<div className=\"row\">\n  <div className=\"col-md-2\">\n  <Dropdown>\n    <Dropdown.Toggle variant=\"normal\" id=\"dropdown-basic\">\n      Menu\n    </Dropdown.Toggle>\n\n    <Dropdown.Menu>\n      <Dropdown.Item href=\"/\">Home</Dropdown.Item>\n    </Dropdown.Menu>\n  </Dropdown>\n  </div>\n  <div className=\"header-text col-md-8\">\n    <div>\n      This Header only for anybody who is logged in\n    </div>\n  </div>\n  <div className=\"col-md-2\">\n  <Dropdown>\n    <Dropdown.Toggle variant=\"normal\" id=\"dropdown-basic\">\n      User\n    </Dropdown.Toggle>\n\n    <Dropdown.Menu>\n      <Dropdown.Item href=\"/\"><Link to=\"/user/dashboard\" >User Dashboard</Link></Dropdown.Item>\n      <Dropdown.Item href=\"/\"><Link className=\"\" to=\"/\" onClick={onLogout}>Logout</Link></Dropdown.Item>\n    </Dropdown.Menu>\n  </Dropdown>\n  </div>\n</div>\n</div>)\n\nexport default UserHeader","import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { logout, selectUser } from '../../app/reducers/userSlice'\nimport AdminHeader from './AdminHeader'\nimport PublicHeader from './PublicHeader'\nimport UserHeader from './UserHeader'\n\nexport const Header: React.FC = () => {\n  const user = useSelector(selectUser)\n  const dispatch = useDispatch()\n\n  const onLogout = () => {\n    dispatch(logout())\n  }\n\n  if (user && user.token) {\n    if (user.roles.find((r) => r.name === 'admin')) return <AdminHeader user={user} onLogout={onLogout} />\n    else return <UserHeader user={user} onLogout={onLogout} />\n  }\n\n  return <PublicHeader />\n}\n\nexport default Header\n","import React from 'react'\n\nexport function UserDashboard() {\n    return (\n      <div>\n        <h2>User Dashboard</h2>\n      </div>\n    );\n  }\n  \n\n  export default UserDashboard","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Redirect, Route } from 'react-router-dom'\nimport { selectUser } from '../../app/reducers/userSlice'\n\nexport const ProtectRoute: React.FC<{ path: string, role?: string, exact?: boolean }> = ({ path, role, exact, children }) => {\n    const user = useSelector(selectUser)\n\n    if (role && !user?.roles.find(r => r.name == role)) {\n        return (<Redirect to={`/login?path=${path}&role=${role}`} />)\n    }\n\n    if (!user?.token) {\n        return (<Redirect to={`/login?path=${path}`} />)\n    }\n\n    return (<Route path={path} exact={exact} children={children} />)\n}\n\nexport default ProtectRoute","import React, {useState, useEffect, useCallback} from 'react'\nimport { Col, Form, Alert, Button, InputGroup, DropdownButton, Dropdown } from \"react-bootstrap\";\nimport './FilterItem.css'\n\nconst basicOptionsName = {\n    contains : 'contains',\n    not_contains : 'not contains',\n    starts_with : 'starts with',\n    not_starts_with : 'not starts with',\n    ends_with : 'ends with',\n    not_ends_with : 'not ends with',\n    isEmpty : 'is empty',\n}\n\ntype basicOptionsNameType = 'contains' | 'not_contains' | 'starts_with' | 'not_starts_with' | 'ends_with' | 'not_ends_with' | 'isEmpty'\n\n\n\nexport interface IFilterItemParam {\n    fields: any[]\n    onChange: (filter: string | null) => void\n}\n\n  \n\nexport const FilterItem: React.FC<IFilterItemParam> = ({fields, onChange}) => {\n    const [fieldSelected, setFieldSelected] = useState(fields[0])\n    const [optionSelected, setOptionSelected] = useState('contains')\n    const [filterText, setFilterText] = useState('')\n    const [filter, setFilter] = useState<string|null>('null')\n\n    const onFieldChange = (field:any) => {\n        console.log('onFieldChange', field)\n        setFieldSelected(field)\n        processFilter(field, optionSelected, filterText)\n    }\n\n    const onOptionChange = (option:any) => {\n        console.log('onOptionChange', option)\n        setOptionSelected(option)\n        processFilter(fieldSelected, option, filterText)\n    }\n\n    const onFilterChange = (e:any) => {\n        const text = e.target.value\n        console.log('onFilterChange', e, text)\n        setFilterText(text)\n        processFilter(fieldSelected, optionSelected, text)\n    }\n\n    const doFilter = useCallback((f: string | null) => {\n        if(filter != f){\n            console.log('useFilter>>>', f)\n            setFilter(f)\n            onChange(f)\n        }\n    }, [filter, onChange, setFilter])\n\n    const processFilter = useCallback((field, option, text) => {\n        if(!text && option != 'isEmpty') {\n            doFilter(null)\n            return\n        }\n\n        const f = {} as any\n        f[`${field}_${option}`] = text\n        doFilter(f)\n\n    }, [doFilter] )\n\n    const gc = (o:any) => {\n        const o2 = o\n        return () => {\n            onFieldChange(o2)\n        }\n    }\n\n    const go = (o:any) => {\n        const o2 = o\n        return () => {onOptionChange(o2);}\n    }\n\n\n    return (\n        <InputGroup className=\"mb-3\">\n            <DropdownButton\n                className=\"field-option\"\n                as={InputGroup.Prepend}\n                variant=\"success\"\n                title={fieldSelected}\n                id=\"input-group-dropdown-0\" >\n                    {fields.map((o)=> (<Dropdown.Item key={o} onClick={gc(o)}>{o.toString()}</Dropdown.Item>))}\n            </DropdownButton>\n            <DropdownButton\n                className=\"select-option\"\n                as={InputGroup.Prepend}\n                variant=\"outline-link\"\n                title={basicOptionsName[optionSelected as basicOptionsNameType]}\n                id=\"input-group-dropdown-1\" >\n                    {Object.getOwnPropertyNames(basicOptionsName).map((o)=> (<Dropdown.Item key={o} onClick={go(o)}>{basicOptionsName[o as basicOptionsNameType]}</Dropdown.Item>))}\n            </DropdownButton>\n            <Form.Control value={filterText} onChange={onFilterChange}/>\n        </InputGroup>)\n\n}\n\nexport default FilterItem","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from 'react-bootstrap'\nimport './Row.css'\n\n\nexport interface IFilteredFieldDesc {\n  name: string\n  title?: string\n  component?: React.FC<any>\n}\n\nexport type IFilteredField = IFilteredFieldDesc | string\n\nexport interface IListRowParams {\n  item: any\n  field: IFilteredField\n}\n\nconst getElementFromField = (item: any, field: IFilteredField) => {\n  const fieldDesc = field as IFilteredFieldDesc\n\n  const names = fieldDesc.name ? fieldDesc.name.split('.') : (field as string).split('.')\n  const element = item[names[0]]\n\n  return { element, name: names[0], names }\n}\n\nexport const ListRowItem: React.FC<IListRowParams> = ({ item, field }) => {\n  const { element, name, names } = getElementFromField(item, field)\n\n  if (!element) {\n    return (<>ERR NOT EXIST:{name}</>)\n  }\n\n  if ((field as IFilteredFieldDesc).component) {\n    const component = (field as IFilteredFieldDesc).component\n    return (<>{component && component({ value: element, names, item })}</>)\n  }\n\n  if (element.substr && element.length > 50) {\n    return (<>{element.substr(0, 47)}...</>)\n  }\n\n  if (element.push && element.reduce && names.length > 1) {\n    return (<>{(element as any[]).reduce((p, e) => p + e[names[1]], '')}</>)\n  }\n\n  return (\n    <>\n      {element}\n    </>\n  );\n};\n\n","import React, { useCallback, useMemo } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Button } from 'react-bootstrap'\nimport './Row.css'\nimport { ListRowItem, IFilteredField } from './RowItem'\n\nexport interface IListRowItem {\n  id: string\n  name: string\n  user: any\n}\n\nexport interface IListRowParams {\n  name: string\n  item: any\n  fields?: IFilteredField[]\n  onDelete: (obj: any) => void\n  showDelete?: boolean\n  onEdit?: (item: any) => void\n  getEditLink?: (item: unknown) => string\n}\n\nexport const ListRow: React.FC<IListRowParams> = ({ item, onDelete, name, fields = ['id'], showDelete = false, onEdit, getEditLink }) => {\n  const doEdit = useCallback(() => {\n    if (onEdit) onEdit(item)\n  }, [item, onEdit])\n\n  const editLink = useMemo(() => {\n    if (getEditLink) return getEditLink(item)\n    else return `/user/${name.toLowerCase()}/${item.id}`\n  }, [name, item, getEditLink])\n\n  return (\n    <React.Fragment>\n      <tr>\n        <td className=\"id\">{onEdit ? <span role={'link'} tabIndex={0} onKeyPress={()=>{}} onClick={doEdit}>{item.id}</span> : <Link to={editLink}>{item.id}</Link>}</td>\n        {fields.map(\n          (field) =>\n            field !== 'id' && (\n              <td>\n                <ListRowItem item={item} field={field} />\n              </td>\n            ),\n        )}\n        {item.user && <td>{item.user.email}</td>}\n\n        {showDelete && (\n          <td className=\"right\">\n            <Button\n              variant=\"danger\"\n              size=\"sm\"\n              onClick={() => {\n                onDelete(item)\n              }}\n            >\n              delete\n            </Button>\n          </td>\n        )}\n      </tr>\n    </React.Fragment>\n  )\n}\n","\nimport React from \"react\";\n\nexport const Loading = ({what = ''}) => {\n    return (<div>{`Loading ${what}... `}</div>)\n}\n\nexport default Loading","import React, { useEffect, useState } from 'react'\nimport { Button, Modal } from 'react-bootstrap'\n\nexport interface IDeleteModalParams {\n  show?: boolean | string | number\n  onHide?: () => void\n  onDelete: (\n    deleteObjectId: IDeleteModalParams['deleteObjectId'],\n    deleteObjectName?: IDeleteModalParams['deleteObjectName'],\n  ) => void\n  categoryName: string\n  deleteObjectId?: string | number\n  deleteObjectName?: string\n  deleting?: boolean\n}\n\nexport const DeleteModal: React.FC<IDeleteModalParams> = ({\n  show = false,\n  onHide,\n  onDelete,\n  categoryName,\n  deleteObjectId,\n  deleteObjectName,\n  deleting,\n}) => {\n  const [showMe, setShowMe] = useState(show)\n  const [lastShow, setLastShow] = useState(show)\n  const onDeleteAction = () => {\n    if (!deleting) {\n      onDelete(deleteObjectId, deleteObjectName)\n    }\n  }\n\n  const onHideAction = () => {\n    if (onHide) {\n      onHide()\n    } else {\n      setShowMe(false)\n    }\n  }\n\n  useEffect(() => {\n    if (show !== lastShow) {\n      setShowMe(!!show)\n      setLastShow(show)\n    }\n  }, [lastShow, show, deleteObjectId])\n\n  return (\n    <div>\n      <Modal show={showMe} onHide={onHideAction}>\n        <Modal.Header closeButton>\n          <div>\n            <Modal.Title>\n              Delete {'>>'} {deleteObjectId} {'<<'}\n            </Modal.Title>\n          </div>\n        </Modal.Header>\n\n        {deleteObjectId && (\n          <Modal.Body>\n            {!deleting ? (\n              <p>\n                Are you sure, you want remove {categoryName} item with\n                {deleteObjectName ? `name ${deleteObjectName} and ` : ''} id{' '}\n                <i>'{deleteObjectId}'</i>\n              </p>\n            ) : (\n              <p>\n                Removing {categoryName} item with{' '}\n                {deleteObjectName ? `name ${deleteObjectName} and ` : ''}\n                {deleteObjectId} ...\n              </p>\n            )}\n          </Modal.Body>\n        )}\n\n        <Modal.Footer>\n          <Button disabled={deleting} variant=\"danger\" type=\"submit\" onClick={onDeleteAction}>\n            Delete\n          </Button>\n          <Button disabled={deleting} variant=\"primary\" onClick={onHideAction}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  )\n}\n\nexport default DeleteModal\n","import React from \"react\";\nimport { Alert } from 'react-bootstrap'\n\nexport const Unauthorized = ({where = ''}) => {\n    return (<Alert variant={'danger'}>{`Unauthorized ${where} access`}</Alert>)\n}\n\nexport default Unauthorized","import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Table as BTable, Button } from 'react-bootstrap'\n\nimport { useQuery, useMutation } from '@apollo/client'\nimport { IListRowParams, ListRow } from './Row'\nimport Loading from '../Loading/Loading'\nimport DeleteModal from '../DeleteModal/DeleteModal'\nimport Unauthorized from '../Unauthorized/Unauthorized'\nimport { DocumentNode } from 'graphql'\nimport { IFilteredField } from './RowItem'\n\nexport interface IFilterWithParams {\n  filter?: string\n  params?: string\n}\n\nexport interface ITableQueries {\n  ADMIN_LIST_QUERY: DocumentNode\n  USER_LIST_QUERY: DocumentNode\n  DELETE_MUTATION: DocumentNode\n}\n\nexport interface ITableList {\n  userId?: string\n  adminMode?: boolean\n  filter: any\n  queries: ITableQueries\n  fields?: IFilteredField[]\n  name: string\n  onEdit: IListRowParams['onEdit']\n  getEditLink?: IListRowParams['getEditLink']\n}\n\nexport const Table: React.FC<ITableList> = ({\n  filter,\n  name,\n  adminMode = false,\n  queries,\n  fields,\n  onEdit,\n  getEditLink,\n}) => {\n  const [unauthorized, setUnauthorized] = useState(false)\n  const [showDeleteModal, setShowDeleteModal] = useState(false)\n  const [deleteObject, setDeleteObject] = useState(null)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [deletingOnDeleteDialog, setDeletingOnDeleteDialog] = useState(false)\n\n  const [loading, setLoading] = useState(true)\n  const [data, setData] = useState<any>([])\n  const [error, setError] = useState<any>()\n\n  const { refetch: userRefetch, loading: userLoading } = useQuery(\n    adminMode ? queries.ADMIN_LIST_QUERY : queries.USER_LIST_QUERY,\n    {\n      onError: (e) => {\n        console.log('onError >>> ', e.message)\n        if (e.message == 'GraphQL error: Unauhorized') {\n          setUnauthorized(true)\n        } else {\n          setError(e)\n        }\n      },\n      onCompleted: (d) => {\n        console.log('user: onCompleted', d)\n        setLoading(false)\n\n        const dataFields = Object.getOwnPropertyNames(d)\n        if (dataFields.length > 0 && d[dataFields[0]].length > 0) {\n          setData(d[dataFields[0]])\n        } else {\n          setData([])\n        }\n      },\n      variables: { filter },\n    },\n  )\n\n  const [deleteProjectMutation, { loading: deleteLoading, error: deleteError }] = useMutation(\n    queries.DELETE_MUTATION,\n    {\n      errorPolicy: 'none',\n      onCompleted: (data: any) => {\n        console.log('DELETE', data.deleteProject)\n        onHideDidaloDelete()\n        userRefetch()\n      },\n      onError: (e) => {\n        console.log('onError >>> ', e.message)\n        if (e.message == 'GraphQL error: Unauhorized') {\n          setUnauthorized(true)\n        }\n      },\n    },\n  )\n\n  const onHideDidaloDelete = () => {\n    setShowDeleteDialog(false)\n    setDeleteObject(null)\n  }\n\n  const onDelete = (obj: any) => {\n    setDeletingOnDeleteDialog(false)\n    setShowDeleteDialog(true)\n    setDeleteObject(obj)\n  }\n\n  const doDelete = (deleteObject: any) => {\n    setDeletingOnDeleteDialog(true)\n    deleteProjectMutation({\n      variables: {\n        id: deleteObject.id,\n      },\n    })\n  }\n\n  if (unauthorized) {\n    return <Unauthorized where={'projects'} />\n  }\n  if (userLoading) return <Loading what={'projects'} />\n\n  return (\n    <div>\n      {error && <div>{`Error! ${error.message}`}</div>}\n\n      <BTable responsive>\n        <thead>\n          <tr>\n            <th>Id</th>\n            {fields?.map((f) => f !== 'id' && <th>{(f as any).name ? (f as any).name : f}</th>)}\n            {adminMode && <th>User</th>}\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.length &&\n            data.map((projectItem: any) => (\n              <ListRow\n                name={name}\n                item={projectItem}\n                onDelete={onDelete}\n                fields={fields}\n                showDelete={adminMode}\n                onEdit={onEdit}\n                getEditLink={getEditLink}\n              />\n            ))}\n        </tbody>\n      </BTable>\n\n      <DeleteModal\n        show={showDeleteDialog}\n        onHide={onHideDidaloDelete}\n        onDelete={doDelete}\n        categoryName={'project'}\n        deleteObjectId={(deleteObject as any)?.id}\n        deleteObjectName={(deleteObject as any)?.name}\n        deleting={deletingOnDeleteDialog}\n      />\n    </div>\n  )\n}\n\nexport default Table\n","import React, { useState, useEffect, useCallback } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport FilterItem from './FilterItem'\nimport { Navbar, Button } from 'react-bootstrap'\nimport './FilteredList.css'\nimport { IFilteredField } from './RowItem'\nimport Table, { ITableList, ITableQueries } from './Table'\n\nexport interface IProjectFilterList {\n  name: string\n  userId?: string\n  adminMode?: boolean\n  queries: ITableQueries\n  fields: IFilteredField[]\n  filter?: any\n  onCreate?: () => void\n  onEdit?: ITableList['onEdit']\n  getEditLink?: ITableList['getEditLink']\n}\n\nconst createFilter = () => {\n  const obj: any = []\n  obj.name = 'AND'\n  return { AND: obj }\n}\n\nconst addAnd = (node: any, filter: any) => {\n  let obj: any = filter\n\n  if (node.name != 'AND') {\n    obj = [obj]\n    obj.name = 'AND'\n  }\n\n  node.push(obj)\n}\n\nconst filterDestructNode = (node: any) => {\n  let filter = ''\n\n  for (const n of node) {\n    if (n.name && n.length > 0) {\n      filter += `,${filterDestructNode(n)}`\n    } else {\n      filter += `,{${n.filter}}`\n    }\n  }\n\n  return `{${node.name}:[${filter.substr(1)}]}`\n}\n\nconst filterDestruct = (filter: any) => {\n  const fo = {\n    filter: '',\n    params: '',\n  }\n\n  fo.filter = filter.AND.length > 0 ? `(filter: ${filterDestructNode(filter.AND)})` : ''\n  fo.params = fo.params.length > 2 ? `(${fo.params.substr(1)})` : ''\n\n  return fo\n}\n\nexport const FilteredList: React.FC<IProjectFilterList> = ({ name, userId, adminMode = false, queries, fields, filter: staticFilter, onCreate, onEdit, getEditLink }) => {\n  const [filter, setFilter] = useState(adminMode ? createFilter() : null)\n  const history = useHistory()\n\n  // console.log(filter, listFilter)\n  const createDefaultFilter = (userId?: string) => {\n    const defaultFilter = createFilter()\n\n    if (userId) {\n      addAnd(defaultFilter.AND, { user_every: { id: userId } })\n    }\n\n    if (staticFilter) {\n      addAnd(defaultFilter.AND, staticFilter)\n    }\n\n    return defaultFilter\n  }\n\n  const processFilter = (filter: any) => {\n    const filterDestructed = filterDestruct(filter)\n\n    console.log('processFilter', { filter, filterDestructed })\n\n    setFilter(filter)\n  }\n\n  useEffect(() => {\n    const defaultFilter = createDefaultFilter(userId)\n    processFilter(defaultFilter)\n  }, [userId])\n\n  const onFilterChange = useCallback(\n    (f: string | null) => {\n      const defaultFilter = createDefaultFilter(userId)\n\n      if (f) {\n        addAnd(defaultFilter.AND, f)\n      }\n\n      processFilter(defaultFilter)\n    },\n    [userId],\n  )\n\n  const onCreateNew = () => {\n    if (onCreate) onCreate()\n    else history.push('/user/' + name.toLowerCase() + '/create')\n  }\n\n  // if is not adminMode,\n  // the useEffect will update filter with user after render\n  // but in render is already called the query\n  // but the query will call without properly setuped filter and return unauthorized\n  if (!adminMode && !filter) {\n    return null\n  }\n\n  return (\n    <div className=\"base-filtered-list\">\n      <section>\n        <h1>{name}</h1>\n        <div className=\"row-head\">\n          <FilterItem fields={fields} onChange={onFilterChange} />\n          <div></div>\n        </div>\n        <div className=\"row-table\">\n          <Table name={name} filter={filter} queries={queries} adminMode={adminMode} fields={fields} onEdit={onEdit} getEditLink={getEditLink} />\n          <Button onClick={onCreateNew}>Create New</Button>\n        </div>\n      </section>\n    </div>\n  )\n}\n\nexport default FilteredList\n","import { useMutation, useQuery } from '@apollo/client'\nimport React, { useCallback, useState } from 'react'\nimport Loading from '../Loading/Loading'\nimport Unauthorized from '../Unauthorized/Unauthorized'\n\nexport const getDataFromRaw = (rawData: any) => {\n  const rawName = Object.keys(rawData)[0]\n  return rawData[rawName]\n}\n\nexport const Editor = ({ name, form, id, renameError, onUpdated, updateCache, query, children }: any) => {\n  const [localId, setLocalId] = useState(id !== 'create' ? id : undefined)\n  const [unauthorized, setUnauthorized] = useState(false)\n  const [errors, setErrors] = useState<string[] | null>([])\n\n  const [storedData, setStoredData] = useState({})\n\n  const handleError = (incommingError: { message: string }) => {\n    let incomingErrors = incommingError.message.split('\\n')\n    if (renameError) {\n      incomingErrors = incomingErrors.map((error) => renameError(error))\n    }\n    setErrors(incomingErrors)\n  }\n\n  const updateDataFromLoaded = (loadedDataRaw: any) => {\n    if (!loadedDataRaw) {\n      return\n    }\n\n    const loadedData = getDataFromRaw(loadedDataRaw)\n\n    if (loadedData) {\n      setStoredData({ ...loadedData })\n    } else {\n      setUnauthorized(true)\n    }\n  }\n\n  const onCompleted = (raw: any) => {\n    const data = getDataFromRaw(raw)\n    setLocalId(data.id)\n    setErrors(null)\n    if (onUpdated) onUpdated(raw)\n  }\n\n  const skipLoading = !localId\n  const { loading, error } = useQuery(query.QUERY, {\n    variables: { id: localId },\n    skip: skipLoading,\n    onCompleted: (loadedDataRaw: any) => {\n      updateDataFromLoaded(loadedDataRaw)\n    },\n    onError: (e) => {\n      if (e.message == 'GraphQL error: Unauhorized') {\n        setUnauthorized(true)\n      }\n    },\n  })\n\n  const [createProjectMutation] = useMutation(query.CREATE_MUTATION, {\n    errorPolicy: 'none',\n    onCompleted: onCompleted,\n    update: updateCache,\n    onError: handleError,\n  })\n\n  const [updateProjectMutation] = useMutation(query.UPDATE_MUTATION, {\n    errorPolicy: 'none',\n    onCompleted: onCompleted,\n    update: updateCache,\n    onError: handleError,\n  })\n\n  // const onSubmit = (data:any) => {\n  //   console.log(data)\n  // }\n\n  const onSubmit = useCallback(\n    (data) => {\n      if (localId) {\n        setErrors(null)\n        updateProjectMutation({\n          variables: {\n            id: localId,\n            ...data,\n          },\n        })\n      } else {\n        createProjectMutation({\n          variables: {\n            userId: localStorage.getItem('user.id'),\n            ...data,\n          },\n        })\n      }\n    },\n    [localId, storedData],\n  )\n\n  if (unauthorized) {\n    return <Unauthorized where={`${name} edit`} />\n  }\n\n  if (loading) {\n    return <Loading what={name} />\n  }\n\n  return <div>{children(storedData, onSubmit, errors)}</div>\n}\n\nexport default Editor\n","import React, { useState, useEffect } from \"react\";\nimport { DropdownButton, Dropdown, Form } from \"react-bootstrap\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { getDataFromRaw } from \"../Editor/Editor\";\n\nexport const ConnectBase: React.FC<{value:any, names?:any, gql: any, item: any}> = ({value, names, gql, item}) => {\n    const element = value\n    const name = names.length>1 && names[1]\n    const elementTitle = element.push && element.reduce && names.length > 1 ? (element as any[]).reduce((p, e)=>p + `, ${e[name]}`, '').substr(2) : element\n  \n    const [title, setTitle] = useState(elementTitle)\n    const [data, setData] = useState<any[]>([])\n  \n    const { refetch: userRefetch, loading: userLoading } = useQuery(gql.QUERY, {\n      onError: (e) => {\n        console.log('ConnectBase:onError >>> ', e.message)\n        if(e.message == 'GraphQL error: Unauhorized'){\n          // setUnauthorized(true)\n        } else {\n          // setError(e)\n        }\n      }, onCompleted: (iraw) => {\n        console.log('user: onCompleted', iraw)\n        // setLoading(false)\n\n        const dataFields = Object.getOwnPropertyNames(iraw)\n        if(dataFields.length > 0 && iraw[dataFields[0]].length > 0){\n          const raw = iraw[dataFields[0]]\n  \n          const final = raw.map((r:any)=>{\n            return {\n              id: r.id,\n              checked: title.indexOf(r[name]) !== -1,\n              label: r[name]\n            }\n          })\n  \n          setData(final)\n        } else {\n          setData([])\n        }\n        \n      },\n    });\n  \n    const [\n      addMutation,\n      { loading: addMutaionLoading, data: addMutationData, error: addMutationError }\n    ] = useMutation(gql.ADD, {\n      errorPolicy: \"none\",\n      onCompleted: (raw: any) => {\n        const data = getDataFromRaw(raw)\n        console.log(\"ADDED\", raw, data.id);\n      },\n      onError: () => {}\n    });\n  \n    const [\n      removeMutation,\n      { loading: removeMutaionLoading, data: removeMutationData, error: removeMutationError }\n    ] = useMutation(gql.REMOVE, {\n      errorPolicy: \"none\",\n      onCompleted: (raw: any) => {\n        const data = getDataFromRaw(raw)\n        console.log(\"REMOVE\", raw, data.id);\n      },\n      onError: () => {}\n    });\n  \n    const onChecked = (value:any) => {\n      const updated = data.map((d:any)=>{\n        if(d.label === value.label) {\n          d.checked = !d.checked\n        }\n        return {...d}\n      })\n  \n      const updateTitle = (updated as any[]).reduce((p, e) => {\n        if(e.checked) return `${p}, ${e.label}`\n        else return p\n      }, '').substr(1)\n  \n      console.log('onChecked:', {updated, value, updateTitle})\n  \n      if(value.checked){\n        addMutation({\n          variables: {\n            id1: value.id,\n            id2: item.id\n          }\n        });\n      } else {\n        removeMutation({\n          variables: {\n            id1: value.id,\n            id2: item.id\n          }\n        });\n      }\n      \n  \n      setData(updated)\n      setTitle(updateTitle)\n    }\n    \n    // if(element.push && element.reduce && names.length > 1) {\n    //   return (<>ahoj: {(element as any[]).reduce((p, e)=>p + e[names[1]], '')}</>)\n    // }\n  \n    return (<DropdownButton id=\"dropdown-basic-button\" title={title}>\n        {data && data.map((d:any)=>(\n        <Dropdown.Item  onClick={(e:any) => onChecked(d)} >\n          <Form.Check \n              type=\"checkbox\" \n              label={d.label} \n              checked={d.checked} />\n        </Dropdown.Item>))\n        }\n      </DropdownButton>)\n  }\n\n  export default ConnectBase","import React from \"react\";\nimport gql from 'graphql-tag';\nimport FilteredList from \"../../../components/List/FilteredList\";\nimport ConnectBase from \"../../../components/List/ConnectBase\";\nimport { loader } from \"graphql.macro\";\n\nconst QUERY_ALL_USERS_ADMIN = loader('./graphql/query-all-user-admin.gql')\nconst USER_ROLE_QUERY = loader('./graphql/query-all-user-role.gql')\nconst MUTATION_ADD_USER_ROLE_TO_USER = loader('./graphql/mutation-add-user-role-to-user.gql')\nconst MUTATION_REMOVE_USER_ROLE_FROM_USER = loader('./graphql/mutation-remove-user-role-from-user.gql')\nconst MUTATION_REMOVE_USER = loader('./graphql/mutation-remove-user.gql')\nconst USER_LIST_QUERY = gql`\n{allUser{id}}`;\n\nconst ConnectRole: React.FC<{ value: any, names?: any, item: any }> = ({ value, names, item }) => {\n\n  const gql = {\n    QUERY: USER_ROLE_QUERY,\n    ADD: MUTATION_ADD_USER_ROLE_TO_USER,\n    REMOVE: MUTATION_REMOVE_USER_ROLE_FROM_USER\n  }\n\n  return <ConnectBase value={value} names={names} gql={gql} item={item} />\n}\n\nexport const UsersList: React.FC<{ userId?: string, adminMode?: boolean }> = ({ userId, adminMode = false }) => {\n  return (\n    <div>\n      <FilteredList\n        name={'Users'}\n        fields={['email', 'password', { name: 'roles.name', component: ConnectRole }, 'roles.id']}\n        userId={userId}\n        adminMode={adminMode}\n        queries={{ USER_LIST_QUERY, ADMIN_LIST_QUERY: QUERY_ALL_USERS_ADMIN, DELETE_MUTATION: MUTATION_REMOVE_USER }} />\n    </div>\n  )\n}\n\nexport default UsersList","import React, { useState, useEffect } from \"react\";\nimport FilteredList from \"../../../components/List/FilteredList\";\nimport gql from 'graphql-tag';\nimport { loader } from \"graphql.macro\";\n\nconst USER_LIST_QUERY = loader('./graphql/query-all-user-role-admin.gql')\nconst ADMIN_LIST_QUERY = loader('./graphql/query-all-user-role-admin.gql')\nconst DELETE_MUTATION = loader('./graphql/mutation-remove-user-role.gql')\n\nexport const UserRoleList: React.FC<{ userId?: string, adminMode?: boolean }> = ({ userId, adminMode = false }) => {\n  return (\n    <div>\n      <FilteredList\n        name={'Roles'}\n        fields={['name']}\n        userId={userId}\n        adminMode={adminMode}\n        queries={{ USER_LIST_QUERY, ADMIN_LIST_QUERY, DELETE_MUTATION }} />\n    </div>\n  )\n}\n\nexport default UserRoleList","import React, { useEffect } from 'react'\nimport { Form, FormControl } from 'react-bootstrap'\n\nexport const Control = ({name, storedData, label, required, register, placeholder, formState, setValue}:any) => {\n    const {errors, touchedFields, dirtyFields} = formState\n    const error = (errors && errors[name])\n    const touched = touchedFields && touchedFields[name]\n    const dirty = dirtyFields && dirtyFields[name]\n    \n    useEffect(()=>{\n      if(storedData && storedData[name]) setValue(name, storedData[name])\n    },[storedData])\n  \n    return (\n      <React.Fragment >\n        <Form.Group controlId={`form-${name}`}>\n            <Form.Label>{label} {required && '*'}</Form.Label>\n            <Form.Control\n                type=\"text\"\n                placeholder={placeholder}\n                {...register(name as any, {required})}\n                \n                isInvalid={error}\n                /* isValid={dirty && !error} */\n              />\n            \n            <FormControl.Feedback type=\"valid\">\n              Perfect!\n            </FormControl.Feedback>\n            <Form.Control.Feedback type=\"invalid\">\n              Please provide a valid {label}.\n            </Form.Control.Feedback>\n          </Form.Group>\n        </React.Fragment>\n    )\n  }\n\n  export default Control","import React, { useState, useEffect, useCallback } from \"react\";\nimport * as _ from 'lodash'\nimport gql from \"graphql-tag\";\n\nimport Editor from \"../../../components/Editor/Editor\"\nimport { Button, Form } from \"react-bootstrap\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { useForm } from 'react-hook-form'\nimport Control from \"../../../components/Editor/Control\";\nimport { loader } from \"graphql.macro\";\n\nconst CREATE_MUTATION = loader('./graphql/mutation-create-user-role.gql')\nconst UPDATE_MUTATION = loader('./graphql//mutation-update-user-role.gql')\nconst QUERY = loader('./graphql/query-user-role.gql')\n\nconst UserRoleForm = ({ storedData, onSubmit, userRoleId, graphQlError }: any) => {\n  const reactForm = useForm()\n  const { register, handleSubmit, formState, setValue, getValues, watch } = reactForm\n  return (<Form onSubmit={handleSubmit(onSubmit)}>\n    <Control name={'name'} label={'Role name'} required={true} storedData={storedData} {...reactForm} />\n    <Button type=\"submit\">Save</Button>\n  </Form>)\n}\n\nexport const UserRoleEdit = (data: any) => {\n  const { id } = useParams() as { id: string }\n\n  return (\n    <>\n      <Editor\n        id={id}\n        name={'UserRole'}\n        fields={['role']}\n        query={{\n          CREATE_MUTATION,\n          UPDATE_MUTATION,\n          QUERY\n        }}\n      >\n        {(storedData: any, onSubmit: any, errors: any) => <UserRoleForm storedData={storedData} onSubmit={onSubmit} graphQlError={errors} userRoleId={id} />}\n      </Editor>\n    </>\n  );\n};\n\nexport default UserRoleEdit","import React, { useState } from 'react'\nimport { Button } from 'react-bootstrap'\nimport DeleteModal, { IDeleteModalParams } from '../../../components/DeleteModal/DeleteModal'\nimport logo from '../../../logo.svg'\n// import { Counter } from './features/counter/Counter';\nimport './Home.css'\nimport { Post, TPostModel } from './Post'\n\nfunction Posts() {\n  // const posts: Post[] = [{ text: \"Initial post \" }];\n  const [posts, setPosts] = useState<TPostModel[]>([])\n  const [text, setText] = useState<string>('')\n  const [postForRemoveId, setPostForRemoveId] = useState<TPostModel['id']>()\n  //let text = \"\";\n\n  const addPost = () => {\n    // const newPosts = [];\n    // for (const p of posts) {\n    //   newPosts.push(p);\n    // }\n    // newPosts.push({ id: posts.length + 1, text: \"Post \" });\n    const newPosts = [...posts, { id: posts.length + 1, text: text }]\n\n    setText('')\n    setPosts(newPosts)\n  }\n\n  const onTextChange = (event: any) => {\n    setText(event.target.value)\n    //text = event.target.value;\n  }\n\n  const showDeleteModal = (id: TPostModel['id']) => {\n    setPostForRemoveId(id)\n  }\n\n  const onDelete: IDeleteModalParams['onDelete'] = (id) => {\n    setPosts(posts.filter((post) => post.id !== id))\n    setPostForRemoveId(undefined)\n  }\n\n  const onDeleteModalHide = () => {\n    setPostForRemoveId(undefined)\n  }\n\n  return (\n    <div className=\"App\">\n      <h4>Add Post</h4>\n      <input type=\"text\" value={text} onChange={onTextChange} />\n      <Button onClick={addPost}>Add Post</Button>\n\n      <h4>Post</h4>\n      {posts.map((post, idx) => (\n        <div key={idx}>\n          {post.id} {post.text}{' '}\n          <Button\n            size={'sm'}\n            variant={'danger'}\n            onClick={() => {\n              showDeleteModal(post.id)\n            }}\n          >\n            Remove\n          </Button>\n        </div>\n      ))}\n\n      <DeleteModal\n        show={!!postForRemoveId}\n        categoryName={'Posts'}\n        onDelete={onDelete}\n        onHide={onDeleteModalHide}\n        deleteObjectId={postForRemoveId}\n      />\n    </div>\n  )\n}\n\nexport default Posts\n","import React, { useEffect } from 'react'\nimport { BrowserRouter, Switch, Route, Link } from 'react-router-dom'\nimport { ApolloProvider } from '@apollo/client'\n\nimport Register from './pages/public/Login/Register'\nimport Login from './pages/public/Login/Login'\nimport ForgottenPassword from './pages/public/Login/ForgottenPassword'\nimport ForgottenPasswordReset from './pages/public/Login/ForgottenPasswordReset'\nimport VerifyUser from './pages/public/Login/VerifyUser'\nimport { PassportCallback } from './pages/public/Login/PassportCallback'\n\nimport Home from './pages/public/Home/Home'\nimport Header from './components/Header/Header'\nimport UserDashboard from './pages/user/UserDashboard/UserDashboard'\nimport ProtectedRoute from './components/ProtectedRoute/ProtectedRoute'\nimport UsersList from './pages/admin/Users/UsersList'\nimport UserRolesList from './pages/admin/UserRoles/UserRolesList'\nimport UserRoleEdit from './pages/admin/UserRoles/UserRolesEdit'\nimport Posts from './pages/user/Posts/Posts'\n\nexport default function App() {\n  return (\n    <>\n      <Header />\n      {/*\n              A <Switch> looks through all its children <Route>\n              elements and renders the first one whose path\n              matches the current URL. Use a <Switch> any time\n              you have multiple routes, but you want only one\n              of them to render at a time\n            */}\n      <Switch>\n        <Route exact path=\"/\">\n          <Home />\n        </Route>\n        <Route exact path=\"/posts\">\n          <Posts />\n        </Route>\n        <Route exact path=\"/login\">\n          <Login />\n        </Route>\n        <Route path=\"/login/facebook\">\n          <PassportCallback type={'facebook'} />\n        </Route>\n        <Route path=\"/login/github\">\n          <PassportCallback type={'github'} />\n        </Route>\n        <Route path=\"/login/google\">\n          <PassportCallback type={'google'} />\n        </Route>\n        <Route path=\"/register\">\n          <Register />\n        </Route>\n\n        <Route path=\"/forgotten-password/:token\" component={ForgottenPasswordReset} />\n        <Route exact path=\"/forgotten-password\">\n          <ForgottenPassword />\n        </Route>\n\n        <Route path=\"/verify-user/:verifyToken\" component={VerifyUser} />\n\n        <ProtectedRoute path=\"/user/dashboard\">\n          <UserDashboard />\n        </ProtectedRoute>\n        <Route path=\"/user/info\">{/* <UserInfo /> */}</Route>\n\n        <ProtectedRoute path=\"/admin/users\" role={'admin'}>\n          <UsersList adminMode={true} />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/admin/roles\" role={'admin'}>\n          <UserRolesList adminMode={true} />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/user/roles/:id\" role={'admin'} children={<UserRoleEdit />} />\n      </Switch>\n    </>\n  )\n}\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit'\nimport userReducer from './reducers/userSlice'\n\nexport const store = configureStore({\n  reducer: {\n    user: userReducer,\n  },\n})\n\nexport type AppDispatch = typeof store.dispatch\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, RootState, unknown, Action<string>>\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import axios from 'axios'\n\nexport const refreshToken = async () => {\n    const userId = localStorage.getItem('user.id')\n    const token = localStorage.getItem('user.token')\n    const refreshToken = localStorage.getItem('user.refreshToken')\n    return axios.post(`${process.env.REACT_APP_HOST}/graphql`, {\n        query: `\n            mutation refreshToken($userId: ID!, $token: String!, $refreshToken:String!){\n                refreshToken_v1(userId: $userId, token: $token, refreshToken:$refreshToken){\n                    token,\n                    refreshToken\n                }\n            }\n        `,\n        variables: {\n            userId,\n            token,\n            refreshToken\n        }\n    })\n}","import { ApolloClient, InMemoryCache, createHttpLink, ApolloLink, fromPromise } from '@apollo/client'\nimport { setContext } from '@apollo/client/link/context'\nimport { onError } from '@apollo/client/link/error'\nimport { refreshToken } from './refreshToken'\nimport { RetryLink } from '@apollo/client/link/retry'\n\nconst retryLink = new RetryLink({\n  attempts: (count, operation, error) => {\n    return true\n  },\n  delay: (count, operation, error) => {\n    return count * 1000 * Math.random()\n  },\n})\n\nlet isRefreshing = false\nlet pendingRequests: any = []\n\nconst resolvePendingRequests = () => {\n  //@ts-ignore\n  pendingRequests.map((callback) => callback())\n  pendingRequests = []\n}\n\n// https://able.bio/AnasT/apollo-graphql-async-access-token-refresh--470t1c8\nconst unautheniticatedAction = (forward: any, operation: any) => {\n  // error code is set to UNAUTHENTICATED\n  // when AuthenticationError thrown in resolver\n  let forward$\n\n  if (!isRefreshing) {\n    isRefreshing = true\n    forward$ = fromPromise(\n      refreshToken()\n        // @ts-ignore\n        .then(({ data }) => {\n          const {\n            data: { refreshToken_v1 },\n          } = data\n          localStorage.setItem('user.token', refreshToken_v1.token)\n          localStorage.setItem('user.refreshToken', refreshToken_v1.refreshToken)\n\n          // Store the new tokens for your auth link\n          resolvePendingRequests()\n          const oldHeaders = operation.getContext().headers\n          // modify the operation context with a new token\n          operation.setContext({\n            headers: {\n              ...oldHeaders,\n              authorization: `Bearer ${refreshToken_v1.token}`,\n            },\n          })\n          return forward(operation)\n        })\n        .catch((error) => {\n          pendingRequests = []\n          // Handle token refresh errors e.g clear stored tokens, redirect to login, ...\n          return\n        })\n        .finally(() => {\n          isRefreshing = false\n        }),\n    ).filter((value) => Boolean(value))\n  } else {\n    // Will only emit once the Promise is resolved\n    forward$ = fromPromise(\n      new Promise((resolve) => {\n        // @ts-ignore\n        pendingRequests.push(() => resolve())\n      }),\n    )\n  }\n\n  // @ts-ignore\n  return forward$.flatMap(() => {\n    return forward(operation)\n  })\n}\n\nconst authLink = setContext((_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  const token = localStorage.getItem('user.token')\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : '',\n    },\n  }\n})\n\nconst httpLink = createHttpLink({\n  uri: `${process.env.REACT_APP_HOST}`,\n})\n\n// @ts-ignore\nconst erroLink = onError(({ graphQLErrors, networkError, operation, forward }) => {\n  if (graphQLErrors) graphQLErrors.map(({ message, locations, path }) => console.log(`[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`))\n\n  if (graphQLErrors && graphQLErrors?.length > 0 && graphQLErrors[0].message == 'Unauthorized') {\n    // @ts-ignore\n    return unautheniticatedAction(forward, operation)\n  }\n\n  if (networkError) console.log(`[Network error]: ${networkError}`)\n})\n\nexport const apolloClient = new ApolloClient({\n  link: ApolloLink.from([retryLink, erroLink, authLink, httpLink]),\n  cache: new InMemoryCache(),\n  defaultOptions: {\n    watchQuery: {\n      errorPolicy: 'none',\n    },\n    query: {\n      errorPolicy: 'none',\n    },\n    mutate: {\n      errorPolicy: 'all',\n    },\n  },\n})\n\nexport default apolloClient\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { store } from './app/store'\nimport { Provider } from 'react-redux'\nimport * as serviceWorker from './serviceWorker'\nimport { ApolloProvider } from '@apollo/client'\nimport apolloClient from './app/apolloClient'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ApolloProvider client={apolloClient}>\n        <BrowserRouter basename={process.env.REACT_APP_BASENAME}>\n          <App />\n        </BrowserRouter>\n      </ApolloProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}