(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{118:function(e,n,t){},145:function(e,n,t){},174:function(e,n,t){},176:function(e,n,t){},177:function(e,n,t){},178:function(e,n,t){},179:function(e,n,t){},182:function(e,n,t){"use strict";t.r(n);var a,i=t(0),r=t.n(i),s=t(36),c=t.n(s),o=(t(145),t(15)),l=t(21),d=t(10),m=t.n(d),u=t(12),j=t(5),b=t(207),v=t(203),k=t(198),O=t(127),h=t(54),g=t.n(h),f=function(){var e,n;return null===(e=Object({NODE_ENV:"production",PUBLIC_URL:"/fawesome",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST)||void 0===e?void 0:e.substr(0,(null===(n=Object({NODE_ENV:"production",PUBLIC_URL:"/fawesome",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST)||void 0===n?void 0:n.length)-8)},p=function(e){return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e)},x=function(e){var n=e.length;if(n<1)return{valid:!1,strong:0,name:"",variant:"danger"};if(n>=15)return{valid:!0,strong:100,name:"strong",variant:"success"};var t=/(?=.*[A-Z]){2,}/.test(e)?2:/(?=.*[A-Z])/.test(e)?1:0,a=/(?=.*[a-z]){2,}/.test(e)?2:/(?=.*[a-z])/.test(e)?1:0,i=/(?=.*[0-9]){2,}/.test(e)?2:/(?=.*[0-9])/.test(e)?1:0,r=t+a+i+(/(?=.*[!@#$%^&*]){2,}/.test(e)?2:/(?=.*[!@#$%^&*])/.test(e)?1:0),s=n>7&&a>0&&i>0||!1,c=r+n/4;return c>10&&(c=10),{valid:s,strong:10*c,name:r>6?"strong":r>4?"intermediate":s?"weak":"poor",variant:c>6?"success":s?"warning":"danger"}},N=t(206),S=t(1),y=function(e){var n=e.onPasswordChange,t=e.password,a=e.strongPassword;return Object(S.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(v.a.Label,{children:"Password"}),Object(S.jsx)(v.a.Control,{type:"password",placeholder:"Password",onChange:n,value:t,isInvalid:!a.valid}),Object(S.jsx)(v.a.Text,{children:"Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter"}),Object(S.jsx)(N.a,{now:a.strong,label:a.name,variant:a.variant})]})},T=t(30),w=function(){return Object(T.b)()},D=(T.c,t(91)),F=(localStorage.getItem("organization.selected"),{user:function(){var e,n=localStorage.getItem("user.token");if(n)return{token:n,email:localStorage.getItem("user.email"),id:localStorage.getItem("user.id"),roles:null===(e=localStorage.getItem("user.roles"))||void 0===e?void 0:e.split(",").map((function(e){return{name:e}})),verified:Boolean(localStorage.getItem("user.verified"))}}(),state:"no-user"}),E=Object(D.b)({name:"user",initialState:F,reducers:{changeState:function(e,n){e.state=n.payload},login:function(e,n){var t;t=n.payload,localStorage.setItem("user.token",t.token),localStorage.setItem("user.refreshToken",t.refreshToken),localStorage.setItem("user.id",t.user.id),localStorage.setItem("user.email",t.user.email),localStorage.setItem("user.verified",Boolean(t.user.verified).toString()),localStorage.setItem("user.roles",t.user.roles.map((function(e){return e.name})).toString()),e.user={id:n.payload.user.id,token:n.payload.token,email:n.payload.user.email,roles:n.payload.user.roles,verified:Boolean(n.payload.user.verified)}},logout:function(e){localStorage.removeItem("user.refreshToken"),localStorage.removeItem("user.token"),localStorage.removeItem("user.id"),localStorage.removeItem("user.verified"),localStorage.removeItem("user.roles"),delete e.user}}}),R=function(e){return e.user.user},U=E.actions,_=U.login,I=U.logout,C=U.changeState,P=E.reducer,A={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"loginRegisterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"register"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pass"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"register_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"pass"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"loginRegisterFragment"},directives:[]}]}}]}}],loc:{start:0,end:327,source:{body:'fragment loginRegisterFragment on UserToken {\n  token\n  refreshToken\n  user {\n    id\n    email\n    verified\n    roles {\n      name\n    }\n  }\n}\n#import "./login-register-fragment.gql"\n\nmutation register($email: String!, $pass: String!) {\n    register_v1(email: $email, password: $pass) {\n      ...loginRegisterFragment\n    }\n  }',name:"GraphQL request",locationOffset:{line:1,column:1}}}},L=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/fawesome",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEFAULT_USER_PATH||"/user/dashboard",n=Object(i.useState)(""),t=Object(j.a)(n,2),a=t[0],r=t[1],s=Object(i.useState)(""),c=Object(j.a)(s,2),d=c[0],h=c[1],g=Object(i.useState)(""),f=Object(j.a)(g,2),N=f[0],T=f[1],D=Object(l.g)(),F=w(),E=Object(b.a)(A,{errorPolicy:"none"}),R=Object(j.a)(E,2),U=R[0],I=R[1],P=I.loading,L=I.data,V=(I.error,Object(i.useState)(!1)),$=Object(j.a)(V,2),q=$[0],M=$[1],H=Object(i.useState)(!1),Q=Object(j.a)(H,2),G=Q[0],B=Q[1],W=Object(i.useState)(x("")),z=Object(j.a)(W,2),K=z[0],Y=z[1],J=Object(i.useState)(!1),Z=Object(j.a)(J,2),X=Z[0],ee=Z[1],ne=function(){var n=Object(u.a)(m.a.mark((function n(){var t,i,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(p(a)){n.next=2;break}return n.abrupt("return",M(!0));case 2:if(d===N){n.next=5;break}return ee(!0),n.abrupt("return");case 5:return n.prev=5,F(C("processing")),n.next=9,U({variables:{email:a,pass:d}});case 9:t=n.sent,i=t.data,r=i.register_v1,F(_(r)),D.replace(e),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(5),console.log("onError",L),B(!0);case 20:case"end":return n.stop()}}),n,null,[[5,16]])})));return function(){return n.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(S.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(S.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(S.jsxs)("div",{className:"col-md-12 text-center",children:[Object(S.jsx)("h1",{children:"User Registration"}),Object(S.jsx)("p",{children:"All big things starting here"})]}),Object(S.jsx)("div",{className:"clearfix"})]})})})})})}),Object(S.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(S.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(S.jsxs)(v.a,{children:[q&&Object(S.jsx)(k.a,{variant:"danger",children:"Email is not in good shape..."}),G&&Object(S.jsxs)(k.a,{variant:"danger",children:["Email is probably taken, did you ",Object(S.jsx)(o.b,{to:"/forgotten-password",children:"forgotten password"}),"?"]}),X&&Object(S.jsx)(k.a,{variant:"danger",children:"The retyped password is not the same"}),Object(S.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(v.a.Label,{children:"Email address"}),Object(S.jsx)(v.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){r(e.target.value),M(!1),B(!1)},value:a,isInvalid:q}),Object(S.jsx)(v.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(S.jsx)(y,{password:d,onPasswordChange:function(e){var n=e.target.value;h(n),M(!1),Y(x(n))},strongPassword:K}),Object(S.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(v.a.Label,{children:"Re-Password"}),Object(S.jsx)(v.a.Control,{type:"password",placeholder:"Retype Password",onChange:function(e){var n=e.target.value;T(n),M(!1),n==d&&ee(!1)},value:N,isInvalid:X})]})]}),Object(S.jsxs)("div",{id:"submit",className:"pull-left",children:[!P&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",onClick:function(){return ne()},children:"Register"}),P&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(S.jsx)("div",{className:"clearfix"}),Object(S.jsx)("div",{className:"spacer-single"})]})]})})})})})]})},V=function(e){return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e)},$={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"loginRegisterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Login"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pass"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"pass"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"loginRegisterFragment"},directives:[]}]}}]}}],loc:{start:0,end:320,source:{body:'fragment loginRegisterFragment on UserToken {\n  token\n  refreshToken\n  user {\n    id\n    email\n    verified\n    roles {\n      name\n    }\n  }\n}\n#import "./login-register-fragment.gql"\n\n  mutation Login($email: String!, $pass: String!) {\n    login_v1(email: $email, password:$pass) {\n      ...loginRegisterFragment\n    }\n}',name:"GraphQL request",locationOffset:{line:1,column:1}}}},q=function(){var e=Object(i.useState)(localStorage.getItem("user.email")||""),n=Object(j.a)(e,2),t=n[0],a=n[1],r=Object(i.useState)(""),s=Object(j.a)(r,2),c=s[0],d=s[1],h=Object(i.useState)(!1),g=Object(j.a)(h,2),p=g[0],x=g[1],N=Object(i.useState)(!1),y=Object(j.a)(N,2),T=y[0],D=y[1],F=Object(l.g)(),E=new URLSearchParams(F.location.search),R=E.get("path"),U=E.get("role"),I=Object({NODE_ENV:"production",PUBLIC_URL:"/fawesome",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEFAULT_USER_PATH||"/user/dashboard",P=w(),A=Object(b.a)($,{errorPolicy:"none"}),L=Object(j.a)(A,2),q=L[0],M=L[1],H=M.loading,Q=(M.data,M.error,function(){var e=Object(u.a)(m.a.mark((function e(){var n,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(t)){e.next=2;break}return e.abrupt("return",x(!0));case 2:return e.prev=2,P(C("processing")),e.next=6,q({variables:{email:t,pass:c}});case 6:n=e.sent,a=n.data,i=a.login_v1,P(_(i)),F.replace(R||I),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),x(!0),D(!0),d("");case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}()),G=function(){F.goBack()};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(S.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(S.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(S.jsxs)("div",{className:"col-md-12 text-center",children:[Object(S.jsx)("h1",{children:"User Login"}),Object(S.jsx)("p",{children:"We was missed you already"}),U&&Object(S.jsxs)(k.a,{variant:"warning",children:["You trying to reach part what is under registered user with ",Object(S.jsx)("b",{children:U})," role protection. ",Object(S.jsx)(o.b,{to:"/",onClick:G,children:"Please take me back"})]}),!U&&R&&Object(S.jsxs)(k.a,{variant:"warning",children:["You trying to reach part what is under registered user protection. ",Object(S.jsx)(o.b,{to:"/",onClick:G,children:"Please take me back"})]})]}),Object(S.jsx)("div",{className:"clearfix"})]})})})})})}),Object(S.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(S.jsxs)(v.a,{name:"contactForm",id:"contact_form",className:"form-border",children:[!T&&Object(S.jsx)("h3",{children:"Login to your account"}),T&&Object(S.jsxs)(k.a,{variant:"danger",children:["Email or password is not valid. Did You ",Object(S.jsx)(o.b,{to:"/forgotten-password",children:"forgotten your password"}),"?"]}),p&&Object(S.jsx)(k.a,{variant:"danger",children:"Email is not in good shape..."}),Object(S.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(v.a.Label,{children:"Email address"}),Object(S.jsx)(v.a.Control,{type:"text",placeholder:"Enter email",onChange:function(e){a(e.target.value),x(!1),D(!1)},value:t,isInvalid:p})]}),Object(S.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(v.a.Label,{children:"Password"}),Object(S.jsx)(v.a.Control,{type:"password",onChange:function(e){d(e.target.value),x(!1),D(!1)},value:c,isInvalid:T}),Object(S.jsx)(v.a.Text,{className:"text-muted",children:"We'll never share your password with anyone else."})]}),Object(S.jsxs)("div",{id:"submit",className:"pull-left",children:[!H&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",onClick:function(){return Q()},children:"Login"}),H&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(S.jsx)("div",{className:"clearfix"}),Object(S.jsx)("div",{className:"spacer-single"}),Object(S.jsxs)("ul",{className:"list s3",children:[Object(S.jsx)("li",{children:"Or login with:"}),Object(S.jsx)("li",{children:Object(S.jsx)("a",{href:"".concat(f(),"/auth/github"),children:"GitHub"})}),Object(S.jsx)("li",{children:Object(S.jsx)("a",{href:"".concat(f(),"/auth/facebook"),children:"Facebook"})}),Object(S.jsx)("li",{children:Object(S.jsx)("a",{href:"".concat(f(),"/auth/google"),children:"Google"})})]})]})]})})})})})]})},M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"forgottenPassword"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forgottenPassword_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:125,source:{body:"mutation forgottenPassword($email: String!) {\n    forgottenPassword_v1(email: $email) {\n        email\n        status\n    }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},H=function(){var e=Object(i.useState)(""),n=Object(j.a)(e,2),t=n[0],a=n[1],r=Object(i.useState)(!1),s=Object(j.a)(r,2),c=s[0],o=s[1],d=Object(i.useState)(!1),h=Object(j.a)(d,2),g=h[0],f=h[1],x=(Object(l.g)(),Object(b.a)(M,{errorPolicy:"none"})),N=Object(j.a)(x,2),y=(N[0],N[1]),T=(y.loading,y.data,y.error,Object(b.a)(M,{errorPolicy:"none"})),w=Object(j.a)(T,2),D=w[0],F=w[1],E=F.loading,R=F.data,U=(F.error,function(){var e=Object(u.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!1),!t||!p(t)){e.next=17;break}return o(!1),e.prev=3,e.next=6,D({variables:{email:t}});case 6:n=e.sent,n.data,f(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("onError",R),o(!0);case 15:e.next=18;break;case 17:o(!0);case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}());return g?Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(k.a,{variant:"success",children:["We sent to You instruction to email ",t,". Check your mailbox (don't forget check spam as well)"]})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(S.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(S.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(S.jsxs)("div",{className:"col-md-12 text-center",children:[Object(S.jsx)("h1",{children:"Forgotten Password"}),Object(S.jsx)("p",{children:"Shortly You will be back"})]}),Object(S.jsx)("div",{className:"clearfix"})]})})})})})}),Object(S.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(S.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(S.jsx)(v.a,{children:Object(S.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(v.a.Label,{children:"Email address"}),Object(S.jsx)(v.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){a(e.target.value),o(!1)},value:t,isInvalid:c}),Object(S.jsx)(v.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]})}),Object(S.jsxs)("div",{id:"submit",className:"pull-left",children:[!E&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",onClick:function(){return U()},children:"Send Recovery Link"}),E&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(S.jsx)("div",{className:"clearfix"})]})]})})})})})]})},Q=t(48),G=t.n(Q),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"forgottenPasswordCheck"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"check"},name:{kind:"Name",value:"forgottenPasswordCheck_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:129,source:{body:"  mutation forgottenPasswordCheck($token: String!) {\n    check: forgottenPasswordCheck_v1(token: $token) {\n      status\n    }\n  }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},W={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"loginRegisterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"forgottenPasswordReset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reset"},name:{kind:"Name",value:"forgottenPasswordReset_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"loginRegisterFragment"},directives:[]}]}}]}}],loc:{start:0,end:362,source:{body:'fragment loginRegisterFragment on UserToken {\n  token\n  refreshToken\n  user {\n    id\n    email\n    verified\n    roles {\n      name\n    }\n  }\n}\n#import "./login-register-fragment.gql"\n\nmutation forgottenPasswordReset($token: String!, $password: String!) {\n  reset: forgottenPasswordReset_v1(token: $token, password: $password) {\n    ...loginRegisterFragment\n  }\n}',name:"GraphQL request",locationOffset:{line:1,column:1}}}},z=function(e){var n=e.match,t=G.a.get(n,"params.token"),a=Object(i.useState)(""),r=Object(j.a)(a,2),s=r[0],c=r[1],o=Object(i.useState)(""),d=Object(j.a)(o,2),h=d[0],g=d[1],f=Object(l.g)(),p=Object(T.b)(),N=Object(b.a)(B,{errorPolicy:"none"}),w=Object(j.a)(N,2),D=w[0],F=w[1],E=F.loading,R=F.data,U=(F.error,Object(b.a)(W,{errorPolicy:"none"})),I=Object(j.a)(U,2),P=I[0],A=I[1],L=A.loading,V=A.data,$=(A.error,Object(i.useState)(!1)),q=Object(j.a)($,2),M=(q[0],q[1]),H=Object(i.useState)(x("")),Q=Object(j.a)(H,2),z=Q[0],K=Q[1],Y=Object(i.useState)(!1),J=Object(j.a)(Y,2),Z=(J[0],J[1],Object(i.useState)(!1)),X=Object(j.a)(Z,2),ee=X[0],ne=X[1];Object(i.useEffect)((function(){(function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D({variables:{token:t}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}}),e,null,[[0,5,7,9]])})));return function(){return e.apply(this,arguments)}})()()}),[t,D]);var te=function(){var e=Object(u.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z.valid){e.next=2;break}return e.abrupt("return");case 2:if(s===h){e.next=5;break}return ne(!0),e.abrupt("return");case 5:return e.prev=5,p(C("processing")),e.next=9,P({variables:{token:t,password:s}});case 9:n=e.sent,a=n.data,p(_(a.reset)),f.replace("/user/projects"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("onError",V);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return E?Object(S.jsx)(k.a,{variant:"success",children:"Checking token"}):R&&R.check&&"valid"===R.check.status?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(S.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(S.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(S.jsxs)("div",{className:"col-md-12 text-center",children:[Object(S.jsx)("h1",{children:"User Password Reset"}),Object(S.jsx)("p",{children:"You will be back soon"})]}),Object(S.jsx)("div",{className:"clearfix"})]})})})})})}),Object(S.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(S.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(S.jsxs)(v.a,{children:[ee&&Object(S.jsx)(k.a,{variant:"danger",children:"The retyped password is not the same"}),Object(S.jsx)(y,{password:s,onPasswordChange:function(e){var n=e.target.value;c(n);var t=function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(e)}(n);M(!t),K(x(n))},strongPassword:z}),Object(S.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(v.a.Label,{children:"Re-Password"}),Object(S.jsx)(v.a.Control,{type:"password",placeholder:"Retype Password",onChange:function(e){var n=e.target.value;g(n),M(!1),n==s&&ne(!1)},value:h,isInvalid:ee})]})]}),Object(S.jsxs)("div",{id:"submit",className:"pull-left",children:[!L&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",onClick:function(){return te()},disabled:!z.valid,children:"Reset password"}),L&&Object(S.jsx)(O.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(S.jsx)("div",{className:"clearfix"})]})]})})})})})]}):Object(S.jsxs)(k.a,{variant:"danger",children:["The ",Object(S.jsx)("b",{children:t})," is not valid or already used"]})},K=t(82),Y=t(41),J=Object(Y.a)(a||(a=Object(K.a)(["\n  mutation verifyEmail($verifyToken: String!) {\n    verifyEmail_v1(verifyToken: $verifyToken) {\n      refreshToken\n      token\n      user {\n        roles{name}\n        id,\n        email,\n        verified\n      }\n    }\n  }\n"]))),Z=function(e){var n=e.match,t=Q.get(n,"params.verifyToken"),a=Object(i.useState)(!1),r=Object(j.a)(a,2),s=r[0],c=r[1],o=Object(l.g)(),d=Object(T.b)(),v=Object(b.a)(J,{errorPolicy:"none"}),k=Object(j.a)(v,2),h=k[0],g=k[1],f=g.loading,p=g.data,x=g.error,N=function(){var e=Object(u.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({variables:{verifyToken:t}});case 3:n=e.sent,a=n.data,d(_(a.verifyEmail_v1)),c(!0),localStorage.setItem("user.verifyToken",t),setTimeout((function(){o.replace("/user/projects")}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("onError",p);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&function(){var e=localStorage.getItem("user.verifyToken");"true"==localStorage.getItem("user.verified")&&e==t?o.replace("/user/projects"):N()}()}),[t]),Object(S.jsx)("section",{children:Object(S.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-8 offset-md-2",children:[s?Object(S.jsxs)("div",{className:"alert alert-success",role:"alert",children:["Your account was verified ",Object(S.jsx)(O.a,{children:"Start creating"})]}):null,f?Object(S.jsx)("div",{className:"alert alert-dark",role:"alert",children:"Your accont is verifing..."}):null,!t||x?Object(S.jsx)("div",{className:"alert alert-dark",role:"alert",children:"The code is invalid or already applyed"}):null]})})})})})},X=function(){var e=Object(u.a)(m.a.mark((function e(n,t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.a.get("".concat(f(),"/auth/").concat(n,"/callback?code=").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ee=function(e){var n=e.type,t=Object(l.h)(),a=G.a.get(t,"search","").split("?code="),r=a.length>1?a[1]:"",s=Object(l.g)(),c=w(),d=Object(i.useState)(),b=Object(j.a)(d,2),v=b[0],O=b[1],h=function(e){O(e),setTimeout((function(){s.replace("/login")}),4e3)};return Object(i.useEffect)((function(){r?function(){var e=Object(u.a)(m.a.mark((function e(){var t,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(n,r);case 3:t=e.sent,c(_(t)),s.replace("/user/projects"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),i=JSON.parse(G.a.get(e.t0,"request.response","{}")),h((null===(a=i.error)||void 0===a?void 0:a.message)||e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()():h("User denied")}),[t]),Object(S.jsx)(S.Fragment,{children:v&&Object(S.jsxs)(k.a,{variant:"danger",children:[n," login isn't work due \"",v,'" You will be redirect back to ',Object(S.jsx)(o.b,{to:"/login",children:"Login"})]})})},ne=t(23),te=(t(174),function(e){var n=e.post;return Object(S.jsxs)("div",{children:[n.id," ",n.text]})});var ae=function(){var e=Object(i.useState)([]),n=Object(j.a)(e,2),t=n[0],a=n[1],r=Object(i.useState)(""),s=Object(j.a)(r,2),c=s[0],o=s[1];return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("h4",{children:"Add Post"}),Object(S.jsx)("input",{type:"text",value:c,onChange:function(e){o(e.target.value)}}),Object(S.jsx)(O.a,{onClick:function(){var e=[].concat(Object(ne.a)(t),[{id:t.length+1,text:c}]);o(""),a(e)},children:"Add Post"}),Object(S.jsx)("h4",{children:"Post"}),t.map((function(e,n){return Object(S.jsx)("div",{children:Object(S.jsx)(te,{post:e})},n)}))]})},ie=t(16),re=function(e){e.user;var n=e.onLogout;return Object(S.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-md-2",children:[Object(S.jsxs)(ie.a,{children:[Object(S.jsx)(ie.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(S.jsx)(ie.a.Menu,{children:Object(S.jsx)(ie.a.Item,{href:"/",children:"Home"})})]}),Object(S.jsxs)(ie.a,{children:[Object(S.jsx)(ie.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Admin"}),Object(S.jsxs)(ie.a.Menu,{children:[Object(S.jsx)(ie.a.Item,{href:"/admin/users",children:"Users"}),Object(S.jsx)(ie.a.Item,{href:"/admin/roles",children:"Roles"})]})]})]}),Object(S.jsx)("div",{className:"header-text col-md-8",children:Object(S.jsx)("div",{children:"This Header only for loged user with admin role"})}),Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsxs)(ie.a,{children:[Object(S.jsx)(ie.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"User"}),Object(S.jsxs)(ie.a.Menu,{children:[Object(S.jsx)(ie.a.Item,{href:"/",children:Object(S.jsx)(o.b,{to:"/user/dashboard",children:"User Dashboard"})}),Object(S.jsx)(ie.a.Item,{href:"/",children:Object(S.jsx)(o.b,{className:"",to:"/",onClick:n,children:"Logout"})})]})]})})]})})},se=(t(176),function(){return Object(S.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsxs)(ie.a,{children:[Object(S.jsx)(ie.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(S.jsx)(ie.a.Menu,{children:Object(S.jsx)(ie.a.Item,{href:"/",children:"Home"})})]})}),Object(S.jsx)("div",{className:"header-text col-md-8",children:Object(S.jsx)("div",{children:"This is public Header"})}),Object(S.jsxs)("div",{className:"col-md-2",children:[Object(S.jsx)(o.b,{className:"",to:"/login",children:"Login"})," or ",Object(S.jsx)(o.b,{className:"",to:"/register",children:"Register"})]})]})})}),ce=function(e){e.user;var n=e.onLogout;return Object(S.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsxs)(ie.a,{children:[Object(S.jsx)(ie.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(S.jsx)(ie.a.Menu,{children:Object(S.jsx)(ie.a.Item,{href:"/",children:"Home"})})]})}),Object(S.jsx)("div",{className:"header-text col-md-8",children:Object(S.jsx)("div",{children:"This Header only for anybody who is logged in"})}),Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsxs)(ie.a,{children:[Object(S.jsx)(ie.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"User"}),Object(S.jsxs)(ie.a.Menu,{children:[Object(S.jsx)(ie.a.Item,{href:"/",children:Object(S.jsx)(o.b,{to:"/user/dashboard",children:"User Dashboard"})}),Object(S.jsx)(ie.a.Item,{href:"/",children:Object(S.jsx)(o.b,{className:"",to:"/",onClick:n,children:"Logout"})})]})]})})]})})},oe=function(){var e=Object(T.c)(R),n=Object(T.b)(),t=function(){n(I())};return e&&e.token?e.roles.find((function(e){return"admin"===e.name}))?Object(S.jsx)(re,{user:e,onLogout:t}):Object(S.jsx)(ce,{user:e,onLogout:t}):Object(S.jsx)(se,{})};var le,de=function(){return Object(S.jsx)("div",{children:Object(S.jsx)("h2",{children:"User Dashboard"})})},me=function(e){var n=e.path,t=e.role,a=e.exact,i=e.children,r=Object(T.c)(R);return t&&!(null===r||void 0===r?void 0:r.roles.find((function(e){return e.name==t})))?Object(S.jsx)(l.a,{to:"/login?path=".concat(n,"&role=").concat(t)}):(null===r||void 0===r?void 0:r.token)?Object(S.jsx)(l.b,{path:n,exact:a,children:i}):Object(S.jsx)(l.a,{to:"/login?path=".concat(n)})},ue=t(31),je=t(199),be=t(200),ve=(t(177),{contains:"contains",not_contains:"not contains",starts_with:"starts with",not_starts_with:"not starts with",ends_with:"ends with",not_ends_with:"not ends with",isEmpty:"is empty"}),ke=function(e){var n=e.fields,t=e.onChange,a=Object(i.useState)(n[0]),r=Object(j.a)(a,2),s=r[0],c=r[1],o=Object(i.useState)("contains"),l=Object(j.a)(o,2),d=l[0],m=l[1],u=Object(i.useState)(""),b=Object(j.a)(u,2),k=b[0],O=b[1],h=Object(i.useState)("null"),g=Object(j.a)(h,2),f=g[0],p=g[1],x=Object(i.useCallback)((function(e){f!=e&&(console.log("useFilter>>>",e),p(e),t(e))}),[f,t,p]),N=Object(i.useCallback)((function(e,n,t){if(t||"isEmpty"==n){var a={};a["".concat(e,"_").concat(n)]=t,x(a)}else x(null)}),[x]),y=function(e){var n=e;return function(){var e;e=n,console.log("onFieldChange",e),c(e),N(e,d,k)}},T=function(e){var n=e;return function(){var e;e=n,console.log("onOptionChange",e),m(e),N(s,e,k)}};return Object(S.jsxs)(je.a,{className:"mb-3",children:[Object(S.jsx)(be.a,{className:"field-option",as:je.a.Prepend,variant:"success",title:s,id:"input-group-dropdown-0",children:n.map((function(e){return Object(S.jsx)(ie.a.Item,{onClick:y(e),children:e.toString()},e)}))}),Object(S.jsx)(be.a,{className:"select-option",as:je.a.Prepend,variant:"outline-link",title:ve[d],id:"input-group-dropdown-1",children:Object.getOwnPropertyNames(ve).map((function(e){return Object(S.jsx)(ie.a.Item,{onClick:T(e),children:ve[e]},e)}))}),Object(S.jsx)(v.a.Control,{value:k,onChange:function(e){var n=e.target.value;console.log("onFilterChange",e,n),O(n),N(s,d,n)}})]})},Oe=(t(178),t(201)),he=t(204),ge=(t(118),function(e){var n=e.item,t=e.field,a=function(e,n){var t=n,a=t.name?t.name.split("."):n.split(".");return{element:e[a[0]],name:a[0],names:a}}(n,t),i=a.element,r=a.name,s=a.names;if(!i)return Object(S.jsxs)(S.Fragment,{children:["ERR NOT EXIST:",r]});if(t.component){var c=t.component;return Object(S.jsx)(S.Fragment,{children:c&&c({value:i,names:s,item:n})})}return i.substr&&i.length>50?Object(S.jsxs)(S.Fragment,{children:[i.substr(0,47),"..."]}):i.push&&i.reduce&&s.length>1?Object(S.jsx)(S.Fragment,{children:i.reduce((function(e,n){return e+n[s[1]]}),"")}):Object(S.jsx)(S.Fragment,{children:i})}),fe=function(e){var n=e.item,t=e.onDelete,a=e.name,s=e.fields,c=void 0===s?["id"]:s,l=e.showDelete,d=void 0!==l&&l,m=e.onEdit,u=e.getEditLink,j=Object(i.useCallback)((function(){m&&m(n)}),[n,m]),b=Object(i.useMemo)((function(){return u?u(n):"/user/".concat(a.toLowerCase(),"/").concat(n.id)}),[a,n,u]);return Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"id",children:m?Object(S.jsx)("span",{role:"link",tabIndex:0,onKeyPress:function(){},onClick:j,children:n.id}):Object(S.jsx)(o.b,{to:b,children:n.id})}),c.map((function(e){return"id"!==e&&Object(S.jsx)("td",{children:Object(S.jsx)(ge,{item:n,field:e})})})),n.user&&Object(S.jsx)("td",{children:n.user.email}),d&&Object(S.jsx)("td",{className:"right",children:Object(S.jsx)(O.a,{variant:"danger",size:"sm",onClick:function(){t(n)},children:"delete"})})]})})},pe=function(e){var n=e.what,t=void 0===n?"":n;return Object(S.jsx)("div",{children:"Loading ".concat(t,"... ")})},xe=t(202),Ne=function(e){var n=e.show,t=void 0!==n&&n,a=e.onHide,r=e.onDelete,s=e.categoryName,c=e.deleteObjectId,o=e.deleteObjectName,l=e.deleting,d=Object(i.useState)(t),m=Object(j.a)(d,2),u=m[0],b=m[1],v=Object(i.useState)(t),k=Object(j.a)(v,2),h=k[0],g=k[1],f=function(){a?a():b(!1)};return Object(i.useEffect)((function(){t!==h&&(b(!!t),g(t))}),[h,t,c]),Object(S.jsx)("div",{children:Object(S.jsxs)(xe.a,{show:u,onHide:f,children:[Object(S.jsx)(xe.a.Header,{closeButton:!0,children:Object(S.jsx)("div",{children:Object(S.jsxs)(xe.a.Title,{children:["Delete ",">>"," ",c," ","<<"]})})}),c&&Object(S.jsx)(xe.a.Body,{children:l?Object(S.jsxs)("p",{children:["Removing ",s," item with"," ",o?"name ".concat(o," and "):"",c," ..."]}):Object(S.jsxs)("p",{children:["Are you sure, you want remove ",s," item with",o?"name ".concat(o," and "):""," id"," ",Object(S.jsxs)("i",{children:["'",c,"'"]})]})}),Object(S.jsxs)(xe.a.Footer,{children:[Object(S.jsx)(O.a,{disabled:l,variant:"danger",type:"submit",onClick:function(){l||r(c,o)},children:"Delete"}),Object(S.jsx)(O.a,{disabled:l,variant:"primary",onClick:f,children:"Close"})]})]})})},Se=function(e){var n=e.where,t=void 0===n?"":n;return Object(S.jsx)(k.a,{variant:"danger",children:"Unauthorized ".concat(t," access")})},ye=function(e){var n=e.filter,t=e.name,a=e.adminMode,r=void 0!==a&&a,s=e.queries,c=e.fields,o=e.onEdit,l=e.getEditLink,d=Object(i.useState)(!1),m=Object(j.a)(d,2),u=m[0],v=m[1],k=Object(i.useState)(!1),O=Object(j.a)(k,2),h=(O[0],O[1],Object(i.useState)(null)),g=Object(j.a)(h,2),f=g[0],p=g[1],x=Object(i.useState)(!1),N=Object(j.a)(x,2),y=N[0],T=N[1],w=Object(i.useState)(!1),D=Object(j.a)(w,2),F=D[0],E=D[1],R=Object(i.useState)(!0),U=Object(j.a)(R,2),_=(U[0],U[1]),I=Object(i.useState)([]),C=Object(j.a)(I,2),P=C[0],A=C[1],L=Object(i.useState)(),V=Object(j.a)(L,2),$=V[0],q=V[1],M=Object(he.a)(r?s.ADMIN_LIST_QUERY:s.USER_LIST_QUERY,{onError:function(e){console.log("onError >>> ",e.message),"GraphQL error: Unauhorized"==e.message?v(!0):q(e)},onCompleted:function(e){console.log("user: onCompleted",e),_(!1);var n=Object.getOwnPropertyNames(e);n.length>0&&e[n[0]].length>0?A(e[n[0]]):A([])},variables:{filter:n}}),H=M.refetch,Q=M.loading,G=Object(b.a)(s.DELETE_MUTATION,{errorPolicy:"none",onCompleted:function(e){console.log("DELETE",e.deleteProject),K(),H()},onError:function(e){console.log("onError >>> ",e.message),"GraphQL error: Unauhorized"==e.message&&v(!0)}}),B=Object(j.a)(G,2),W=B[0],z=B[1],K=(z.loading,z.error,function(){T(!1),p(null)}),Y=function(e){E(!1),T(!0),p(e)};return u?Object(S.jsx)(Se,{where:"projects"}):Q?Object(S.jsx)(pe,{what:"projects"}):Object(S.jsxs)("div",{children:[$&&Object(S.jsx)("div",{children:"Error! ".concat($.message)}),Object(S.jsxs)(Oe.a,{responsive:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Id"}),null===c||void 0===c?void 0:c.map((function(e){return"id"!==e&&Object(S.jsx)("th",{children:e.name?e.name:e})})),r&&Object(S.jsx)("th",{children:"User"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:P.length&&P.map((function(e){return Object(S.jsx)(fe,{name:t,item:e,onDelete:Y,fields:c,showDelete:r,onEdit:o,getEditLink:l})}))})]}),Object(S.jsx)(Ne,{show:y,onHide:K,onDelete:function(e){E(!0),W({variables:{id:e.id}})},categoryName:"project",deleteObjectId:null===f||void 0===f?void 0:f.id,deleteObjectName:null===f||void 0===f?void 0:f.name,deleting:F})]})},Te=function(){var e=[];return e.name="AND",{AND:e}},we=function(e,n){var t=n;"AND"!=e.name&&((t=[t]).name="AND"),e.push(t)},De=function e(n){var t,a="",i=Object(ue.a)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.name&&r.length>0?a+=",".concat(e(r)):a+=",{".concat(r.filter,"}")}}catch(s){i.e(s)}finally{i.f()}return"{".concat(n.name,":[").concat(a.substr(1),"]}")},Fe=function(e){var n={filter:"",params:""};return n.filter=e.AND.length>0?"(filter: ".concat(De(e.AND),")"):"",n.params=n.params.length>2?"(".concat(n.params.substr(1),")"):"",n},Ee=function(e){var n=e.name,t=e.userId,a=e.adminMode,r=void 0!==a&&a,s=e.queries,c=e.fields,o=e.filter,d=e.onCreate,m=e.onEdit,u=e.getEditLink,b=Object(i.useState)(r?Te():null),v=Object(j.a)(b,2),k=v[0],h=v[1],g=Object(l.g)(),f=function(e){var n=Te();return e&&we(n.AND,{user_every:{id:e}}),o&&we(n.AND,o),n},p=function(e){var n=Fe(e);console.log("processFilter",{filter:e,filterDestructed:n}),h(e)};Object(i.useEffect)((function(){var e=f(t);p(e)}),[t]);var x=Object(i.useCallback)((function(e){var n=f(t);e&&we(n.AND,e),p(n)}),[t]);return r||k?Object(S.jsx)("div",{className:"base-filtered-list",children:Object(S.jsxs)("section",{children:[Object(S.jsx)("h1",{children:n}),Object(S.jsxs)("div",{className:"row-head",children:[Object(S.jsx)(ke,{fields:c,onChange:x}),Object(S.jsx)("div",{})]}),Object(S.jsxs)("div",{className:"row-table",children:[Object(S.jsx)(ye,{name:n,filter:k,queries:s,adminMode:r,fields:c,onEdit:m,getEditLink:u}),Object(S.jsx)(O.a,{onClick:function(){d?d():g.push("/user/"+n.toLowerCase()+"/create")},children:"Create New"})]})]})}):null},Re=t(28),Ue=function(e){return e[Object.keys(e)[0]]},_e=function(e){var n=e.name,t=(e.form,e.id),a=e.renameError,r=e.onUpdated,s=e.updateCache,c=e.query,o=e.children,l=Object(i.useState)("create"!==t?t:void 0),d=Object(j.a)(l,2),m=d[0],u=d[1],v=Object(i.useState)(!1),k=Object(j.a)(v,2),O=k[0],h=k[1],g=Object(i.useState)([]),f=Object(j.a)(g,2),p=f[0],x=f[1],N=Object(i.useState)({}),y=Object(j.a)(N,2),T=y[0],w=y[1],D=function(e){var n=e.message.split("\n");a&&(n=n.map((function(e){return a(e)}))),x(n)},F=function(e){var n=Ue(e);u(n.id),x(null),r&&r(e)},E=!m,R=Object(he.a)(c.QUERY,{variables:{id:m},skip:E,onCompleted:function(e){!function(e){if(e){var n=Ue(e);n?w(Object(Re.a)({},n)):h(!0)}}(e)},onError:function(e){"GraphQL error: Unauhorized"==e.message&&h(!0)}}),U=R.loading,_=(R.error,Object(b.a)(c.CREATE_MUTATION,{errorPolicy:"none",onCompleted:F,update:s,onError:D})),I=Object(j.a)(_,1)[0],C=Object(b.a)(c.UPDATE_MUTATION,{errorPolicy:"none",onCompleted:F,update:s,onError:D}),P=Object(j.a)(C,1)[0],A=Object(i.useCallback)((function(e){m?(x(null),P({variables:Object(Re.a)({id:m},e)})):I({variables:Object(Re.a)({userId:localStorage.getItem("user.id")},e)})}),[m,T]);return O?Object(S.jsx)(Se,{where:"".concat(n," edit")}):U?Object(S.jsx)(pe,{what:n}):Object(S.jsx)("div",{children:o(T,A,p)})},Ie=function(e){var n=e.value,t=e.names,a=e.gql,r=e.item,s=n,c=t.length>1&&t[1],o=s.push&&s.reduce&&t.length>1?s.reduce((function(e,n){return e+", ".concat(n[c])}),"").substr(2):s,l=Object(i.useState)(o),d=Object(j.a)(l,2),m=d[0],u=d[1],k=Object(i.useState)([]),O=Object(j.a)(k,2),h=O[0],g=O[1],f=Object(he.a)(a.QUERY,{onError:function(e){console.log("ConnectBase:onError >>> ",e.message),e.message},onCompleted:function(e){console.log("user: onCompleted",e);var n=Object.getOwnPropertyNames(e);if(n.length>0&&e[n[0]].length>0){var t=e[n[0]].map((function(e){return{id:e.id,checked:-1!==m.indexOf(e[c]),label:e[c]}}));g(t)}else g([])}}),p=(f.refetch,f.loading,Object(b.a)(a.ADD,{errorPolicy:"none",onCompleted:function(e){var n=Ue(e);console.log("ADDED",e,n.id)},onError:function(){}})),x=Object(j.a)(p,2),N=x[0],y=x[1],T=(y.loading,y.data,y.error,Object(b.a)(a.REMOVE,{errorPolicy:"none",onCompleted:function(e){var n=Ue(e);console.log("REMOVE",e,n.id)},onError:function(){}})),w=Object(j.a)(T,2),D=w[0],F=w[1];F.loading,F.data,F.error;return Object(S.jsx)(be.a,{id:"dropdown-basic-button",title:m,children:h&&h.map((function(e){return Object(S.jsx)(ie.a.Item,{onClick:function(n){return function(e){var n=h.map((function(n){return n.label===e.label&&(n.checked=!n.checked),Object(Re.a)({},n)})),t=n.reduce((function(e,n){return n.checked?"".concat(e,", ").concat(n.label):e}),"").substr(1);console.log("onChecked:",{updated:n,value:e,updateTitle:t}),e.checked?N({variables:{id1:e.id,id2:r.id}}):D({variables:{id1:e.id,id2:r.id}}),g(n),u(t)}(e)},children:Object(S.jsx)(v.a.Check,{type:"checkbox",label:e.label,checked:e.checked})})}))})},Ce={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FragmentAllUserAdmin"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"password"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"UserFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FragmentAllUserAdmin"},directives:[]}]}}]}}],loc:{start:0,end:241,source:{body:'fragment FragmentAllUserAdmin on UserModel {\n  id\n  email\n  password\n  roles {\n    id\n    name\n  }\n}\n#import "./fragment-all-user-admin.gql"\nquery allUser($filter: UserFilter) {\n  allUser(filter: $filter) {\n    ...FragmentAllUserAdmin\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},Pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUserRole"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUserRole"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:58,source:{body:"query allUserRole {\n  allUserRole {\n    id\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addToRoleOnUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id1"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id2"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addTo_RoleOnUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"rolesUserRoleId"},value:{kind:"Variable",name:{kind:"Name",value:"id1"}}},{kind:"Argument",name:{kind:"Name",value:"rolesUserId"},value:{kind:"Variable",name:{kind:"Name",value:"id2"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rolesUserRole"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"usersUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:184,source:{body:"mutation addToRoleOnUser($id1: ID!, $id2: ID!) {\n  addTo_RoleOnUser(rolesUserRoleId: $id1, rolesUserId: $id2) {\n    rolesUserRole {\n      id\n    }\n    usersUser {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeFromRoleOnUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id1"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id2"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeFrom_RoleOnUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"rolesUserRoleId"},value:{kind:"Variable",name:{kind:"Name",value:"id1"}}},{kind:"Argument",name:{kind:"Name",value:"rolesUserId"},value:{kind:"Variable",name:{kind:"Name",value:"id2"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rolesUserRole"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"usersUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:194,source:{body:"mutation removeFromRoleOnUser($id1: ID!, $id2: ID!) {\n  removeFrom_RoleOnUser(rolesUserRoleId: $id1, rolesUserId: $id2) {\n    rolesUserRole {\n      id\n    }\n    usersUser {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ve={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:69,source:{body:"mutation removeUser($id: ID!) {\n  removeUser(id: $id) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},$e=Object(Y.a)(le||(le=Object(K.a)(["\n{allUser{id}}"]))),qe=function(e){var n=e.value,t=e.names,a=e.item,i={QUERY:Pe,ADD:Ae,REMOVE:Le};return Object(S.jsx)(Ie,{value:n,names:t,gql:i,item:a})},Me=function(e){var n=e.userId,t=e.adminMode,a=void 0!==t&&t;return Object(S.jsx)("div",{children:Object(S.jsx)(Ee,{name:"Users",fields:["email","password",{name:"roles.name",component:qe},"roles.id"],userId:n,adminMode:a,queries:{USER_LIST_QUERY:$e,ADMIN_LIST_QUERY:Ce,DELETE_MUTATION:Ve}})})},He={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"UserRoleFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100,source:{body:"query allUserRole($filter: UserRoleFilter) {\n  allUserRole(filter: $filter) {\n    id\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Qe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"UserRoleFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100,source:{body:"query allUserRole($filter: UserRoleFilter) {\n  allUserRole(filter: $filter) {\n    id\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ge={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:77,source:{body:"mutation removeUserRole($id: ID!) {\n  removeUserRole(id: $id) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Be=function(e){var n=e.userId,t=e.adminMode,a=void 0!==t&&t;return Object(S.jsx)("div",{children:Object(S.jsx)(Ee,{name:"Roles",fields:["name"],userId:n,adminMode:a,queries:{USER_LIST_QUERY:He,ADMIN_LIST_QUERY:Qe,DELETE_MUTATION:Ge}})})},We=t(131),ze=t(123),Ke=function(e){var n=e.name,t=e.storedData,a=e.label,s=e.required,c=e.register,o=e.placeholder,l=e.formState,d=e.setValue,m=l.errors,u=l.touchedFields,j=l.dirtyFields,b=m&&m[n];u&&u[n],j&&j[n];return Object(i.useEffect)((function(){t&&t[n]&&d(n,t[n])}),[t]),Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)(v.a.Group,{controlId:"form-".concat(n),children:[Object(S.jsxs)(v.a.Label,{children:[a," ",s&&"*"]}),Object(S.jsx)(v.a.Control,Object(Re.a)(Object(Re.a)({type:"text",placeholder:o},c(n,{required:s})),{},{isInvalid:b})),Object(S.jsx)(ze.a.Feedback,{type:"valid",children:"Perfect!"}),Object(S.jsxs)(v.a.Control.Feedback,{type:"invalid",children:["Please provide a valid ",a,"."]})]})})},Ye={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:96,source:{body:"mutation createUserRole($name: String!) {\n  createUserRole(name: $name) {\n    id\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Je={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115,source:{body:"mutation updateUserRole($id: ID!, $name: String!) {\n  updateUserRole(id: $id, name: $name) {\n    id\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ze={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"UserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:70,source:{body:"query userRole($id: ID) {\n  UserRole(id: $id) {\n    id\n    name\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Xe=function(e){var n=e.storedData,t=e.onSubmit,a=(e.userRoleId,e.graphQlError,Object(We.a)()),i=(a.register,a.handleSubmit);a.formState,a.setValue,a.getValues,a.watch;return Object(S.jsxs)(v.a,{onSubmit:i(t),children:[Object(S.jsx)(Ke,Object(Re.a)({name:"name",label:"Role name",required:!0,storedData:n},a)),Object(S.jsx)(O.a,{type:"submit",children:"Save"})]})},en=function(e){var n=Object(l.i)().id;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(_e,{id:n,name:"UserRole",fields:["role"],query:{CREATE_MUTATION:Ye,UPDATE_MUTATION:Je,QUERY:Ze},children:function(e,t,a){return Object(S.jsx)(Xe,{storedData:e,onSubmit:t,graphQlError:a,userRoleId:n})}})})};t(179);var nn=function(){var e=Object(i.useState)([]),n=Object(j.a)(e,2),t=n[0],a=n[1],r=Object(i.useState)(""),s=Object(j.a)(r,2),c=s[0],o=s[1],l=Object(i.useState)(),d=Object(j.a)(l,2),m=d[0],u=d[1];return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("h4",{children:"Add Post"}),Object(S.jsx)("input",{type:"text",value:c,onChange:function(e){o(e.target.value)}}),Object(S.jsx)(O.a,{onClick:function(){var e=[].concat(Object(ne.a)(t),[{id:t.length+1,text:c}]);o(""),a(e)},children:"Add Post"}),Object(S.jsx)("h4",{children:"Post"}),t.map((function(e,n){return Object(S.jsxs)("div",{children:[e.id," ",e.text," ",Object(S.jsx)(O.a,{size:"sm",variant:"danger",onClick:function(){var n;n=e.id,u(n)},children:"Remove"})]},n)})),Object(S.jsx)(Ne,{show:!!m,categoryName:"Posts",onDelete:function(e){a(t.filter((function(n){return n.id!==e}))),u(void 0)},onHide:function(){u(void 0)},deleteObjectId:m})]})};function tn(){return Object(S.jsxs)(o.a,{children:[Object(S.jsx)(oe,{}),Object(S.jsxs)(l.d,{children:[Object(S.jsx)(l.b,{exact:!0,path:"/",children:Object(S.jsx)(ae,{})}),Object(S.jsx)(l.b,{exact:!0,path:"/posts",children:Object(S.jsx)(nn,{})}),Object(S.jsx)(l.b,{exact:!0,path:"/login",children:Object(S.jsx)(q,{})}),Object(S.jsx)(l.b,{path:"/login/facebook",children:Object(S.jsx)(ee,{type:"facebook"})}),Object(S.jsx)(l.b,{path:"/login/github",children:Object(S.jsx)(ee,{type:"github"})}),Object(S.jsx)(l.b,{path:"/login/google",children:Object(S.jsx)(ee,{type:"google"})}),Object(S.jsx)(l.b,{path:"/register",children:Object(S.jsx)(L,{})}),Object(S.jsx)(l.b,{path:"/forgotten-password/:token",component:z}),Object(S.jsx)(l.b,{exact:!0,path:"/forgotten-password",children:Object(S.jsx)(H,{})}),Object(S.jsx)(l.b,{path:"/verify-user/:verifyToken",component:Z}),Object(S.jsx)(me,{path:"/user/dashboard",children:Object(S.jsx)(de,{})}),Object(S.jsx)(l.b,{path:"/user/info"}),Object(S.jsx)(me,{path:"/admin/users",role:"admin",children:Object(S.jsx)(Me,{adminMode:!0})}),Object(S.jsx)(me,{path:"/admin/roles",role:"admin",children:Object(S.jsx)(Be,{adminMode:!0})}),Object(S.jsx)(me,{path:"/user/roles/:id",role:"admin",children:Object(S.jsx)(en,{})})]})]})}var an=Object(D.a)({reducer:{user:P}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rn=t(181),sn=t(180),cn=t(130),on=t(99),ln=t(38),dn=t(183),mn=t(128),un=t(129),jn=function(){var e=Object(u.a)(m.a.mark((function e(){var n,t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("user.id"),t=localStorage.getItem("user.token"),a=localStorage.getItem("user.refreshToken"),e.abrupt("return",g.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/fawesome",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST,"/graphql"),{query:"\n            mutation refreshToken($userId: ID!, $token: String!, $refreshToken:String!){\n                refreshToken_v1(userId: $userId, token: $token, refreshToken:$refreshToken){\n                    token,\n                    refreshToken\n                }\n            }\n        ",variables:{userId:n,token:t,refreshToken:a}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn=new(t(205).a)({attempts:function(e,n,t){return!0},delay:function(e,n,t){return 1e3*e*Math.random()}}),vn=!1,kn=[],On=function(e,n){var t;return vn?t=Object(sn.a)(new Promise((function(e){kn.push((function(){return e()}))}))):(vn=!0,t=Object(sn.a)(jn().then((function(t){var a=t.data.data.refreshToken_v1;localStorage.setItem("user.token",a.token),localStorage.setItem("user.refreshToken",a.refreshToken),kn.map((function(e){return e()})),kn=[];var i=n.getContext().headers;return n.setContext({headers:Object(Re.a)(Object(Re.a)({},i),{},{authorization:"Bearer ".concat(a.token)})}),e(n)})).catch((function(e){kn=[]})).finally((function(){vn=!1}))).filter((function(e){return Boolean(e)}))),t.flatMap((function(){return e(n)}))},hn=Object(mn.a)((function(e,n){var t=n.headers,a=localStorage.getItem("user.token");return{headers:Object(Re.a)(Object(Re.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),gn=Object(cn.a)({uri:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/fawesome",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST)}),fn=Object(un.a)((function(e){var n=e.graphQLErrors,t=e.networkError,a=e.operation,i=e.forward;if(n&&n.map((function(e){var n=e.message,t=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),n&&(null===n||void 0===n?void 0:n.length)>0&&"Unauthorized"==n[0].message)return On(i,a);t&&console.log("[Network error]: ".concat(t))})),pn=new on.a({link:ln.ApolloLink.from([bn,fn,hn,gn]),cache:new dn.a,defaultOptions:{watchQuery:{errorPolicy:"none"},query:{errorPolicy:"none"},mutate:{errorPolicy:"all"}}});c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(T.a,{store:an,children:Object(S.jsx)(rn.a,{client:pn,children:Object(S.jsx)(tn,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[182,1,2]]]);
//# sourceMappingURL=main.b664a09a.chunk.js.map